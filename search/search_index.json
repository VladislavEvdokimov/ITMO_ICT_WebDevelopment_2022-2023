{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u21162. \u0415\u0432\u0434\u043e\u043a\u0438\u043c\u043e\u0432 \u0412\u043b\u0430\u0434\u0438\u0441\u043b\u0430\u0432 \u041a33421 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0412\u0410\u0420\u0418\u0410\u041d\u0422 4: \u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0443\u0440\u043e\u0432 \u0442\u0443\u0440\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0444\u0438\u0440\u043c\u044b \u0425\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0438 \u0442\u0443\u0440\u0430, \u0442\u0443\u0440\u0430\u0433\u0435\u043d\u0441\u0442\u0432\u0435, \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u0442\u0443\u0440\u0430, \u043f\u0435\u0440\u0438\u043e\u0434\u0435 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0442\u0443\u0440\u0430, \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u043e\u043f\u043b\u0430\u0442\u044b. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b: 1) \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439. 2) \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438 \u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u043e\u0432. \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0441\u0432\u043e\u0438\u0445 \u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439. 3) \u041d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u0442\u0437\u044b\u0432\u043e\u0432 \u043a \u0442\u0443\u0440\u0430\u043c. \u041f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432, \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c\u0441\u044f \u0434\u0430\u0442\u044b \u0442\u0443\u0440\u0430, \u0442\u0435\u043a\u0441\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f, \u0440\u0435\u0439\u0442\u0438\u043d\u0433 (1-10), \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0442\u043e\u0440\u0435. 4) \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u0430 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Django-admin. 5) \u0412 \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430, \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0449\u0430\u044f \u0432\u0441\u0435 \u043f\u0440\u043e\u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u0443\u0440\u044b \u043f\u043e \u0441\u0442\u0440\u0430\u043d\u0430\u043c. \u0424\u0430\u0439\u043b\u044b \u043f\u0440\u043e\u0435\u043a\u0442\u0430: models.py from django.db import models from django.contrib.auth import get_user_model from django.contrib.auth.models import AbstractUser class User(AbstractUser): username = models.CharField(\"username\", max_length=150, unique=True) password = models.CharField(max_length=30, null=False) passport_data = models.CharField(max_length=30, null=False) email = models.EmailField(\"email address\", unique=True) tour = models.ManyToManyField(\"self\", through=\"Reservation\") phone_number = models.IntegerField(null=True) class Tour(models.Model): payment_by = [('\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0435', '\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0435'), ('\u041e\u043d\u043b\u0430\u0439\u043d \u043e\u043f\u043b\u0430\u0442\u0430', '\u041e\u043d\u043b\u0430\u0439\u043d \u043e\u043f\u043b\u0430\u0442\u0430')] naming = models.CharField(max_length=50, null=False) country = models.CharField(max_length=30, null=False) city = models.CharField(max_length=30, null=False) description = models.CharField(max_length=2000, null=False) paid_with = models.CharField(max_length=13, choices=payment_by) start_date = models.DateField() end_date = models.DateField() class Feedback(models.Model): User = get_user_model() rating = [(1, '1'), (2, '2'), (3, '3'), (3, '3'), (4, '4'), (5, '5'), (6, '6'), (7, '7'), (8, '8'), (9, '9'), (10, '10')] username = models.ForeignKey('User', on_delete=models.CASCADE) comment = models.CharField(max_length=5000) tour = models.ForeignKey(\"Tour\", on_delete=models.CASCADE) user_rating = models.IntegerField(choices=rating) date_of_publication = models.DateField() start_date = models.DateField() end_date = models.DateField() class Reservation(models.Model): User = get_user_model() username = models.ForeignKey('User', on_delete=models.CASCADE) tour = models.ForeignKey('Tour', on_delete=models.CASCADE) start_date = models.DateField(null=True) end_date = models.DateField(null=True) status = models.BooleanField(null=True) forms.py from django import forms from django.contrib.auth.forms import UserCreationForm from .models import * class RegistrationForm(UserCreationForm): class Meta: model = User fields = ['username', 'password1', 'password2', 'email', 'passport_data', 'phone_number'] class LoginForm(forms.ModelForm): class Meta: model = User fields = ['username', 'password'] class CreateCommentForm(forms.ModelForm): class Meta: model = Feedback fields = ('username', 'start_date', 'tour', 'end_date', 'user_rating', 'comment', 'date_of_publication') def __init__(self, *args, **kwargs): super(CreateCommentForm, self).__init__(*args, **kwargs) self.fields['username'].disabled = True class CreateReservationForm(forms.ModelForm): class Meta: model = Reservation fields = ('username', 'tour', 'start_date', 'end_date') def __init__(self, *args, **kwargs): super(CreateReservationForm, self).__init__(*args, **kwargs) self.fields['username'].disabled = True self.fields['tour'].disabled = True views.py from django.http import HttpResponse from django.shortcuts import render, redirect, get_object_or_404 from django.views.generic import CreateView, ListView, UpdateView, DeleteView from .forms import * from .models import * from django.contrib.auth import authenticate, login, logout def homepage(request): return render(request, 'main.html') def profile(request): return render(request, 'profile.html') def register(request): if request.method == 'POST': form = RegistrationForm(request.POST) if form.is_valid(): form.save() username = form.cleaned_data['username'] password = form.cleaned_data['password1'] user = authenticate(username=username, password=password) login(request, user) return redirect('/profile') else: form = RegistrationForm() visual = {'form': form} return render(request, 'registration/signin.html', visual) def user_login(request): global form if request.method == \"POST\": username = request.POST['username'] password = request.POST['password'] user = authenticate(request, username=username, password=password) if user is not None: if user.is_active: login(request, user) return redirect('/main') else: return HttpResponse('\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!') else: form = LoginForm() return render(request, 'registration/login.html', {'form': form}) def log_out(request): logout(request) return redirect('/main') class CreateReservation(CreateView): form_class = CreateReservationForm model = Reservation template_name = 'reservation.html' context_object_name = 'reservation' success_url = '/profile' def get_initial(self): initial = super(CreateReservation, self).get_initial() initial = initial.copy() initial['username'] = self.request.user.pk initial['tour'] = get_object_or_404(Tour, pk=self.kwargs['pk']) return initial class UpdateReserveView(UpdateView): model = Reservation fields = ['start_date', 'end_date'] template_name = 'upreservation.html' context_object_name = 'reservation' success_url = '/profile' class DeleteReserveView(DeleteView): model = Reservation template_name = 'delreservation.html' context_object_name = 'reservation' success_url = '/profile' def reservedtourlist(request): visual = {\"reservations\": Reservation.objects.all()} return render(request, 'reservedtour.html', visual) class listreservations(ListView): template_name = 'profilereservations.html' context_object_name = 'reservation_list' def get_queryset(self): self.user = self.request.user.pk return Reservation.objects.filter(username=self.user) def commentlist(request): visual = {\"comments\": Feedback.objects.all()} return render(request, 'comments.html', visual) def tourlist(request): visual = {\"tours\": Tour.objects.all()} return render(request, 'tours.html', visual) class CreateComment(CreateView): form_class = CreateCommentForm model = Feedback template_name = 'comment.html' context_object_name = 'comment' success_url = '/comments' def get_initial(self): initial = super(CreateComment, self).get_initial() initial = initial.copy() initial['username'] = self.request.user.pk return initial urls.py from django.urls import path from . import views from .views import * urlpatterns = [ path('main/', views.homepage), path('profile/', views.profile), path('login/', views.user_login, name='login'), path('register/', register, name='register'), path('logout/', views.log_out), path('reservedtour/', views.reservedtourlist), path('comments/', views.commentlist), path('createcomment/', CreateComment.as_view()), path('tours/', views.tourlist), path('tours/<int:pk>/reservation', CreateReservation.as_view(), name='reservation'), path('profilereservations/', listreservations.as_view(), name='reservations'), path('profilereservations/deletereservation/<int:pk>/', views.DeleteReserveView.as_view()), path('profilereservations/updatereservation/<int:pk>/', views.UpdateReserveView.as_view()) ]","title":"\u041b\u0430\u0431\u0430 \u21162"},{"location":"#no2-33421","text":"","title":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u21162. \u0415\u0432\u0434\u043e\u043a\u0438\u043c\u043e\u0432 \u0412\u043b\u0430\u0434\u0438\u0441\u043b\u0430\u0432 \u041a33421"},{"location":"#_1","text":"\u0412\u0410\u0420\u0418\u0410\u041d\u0422 4: \u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0443\u0440\u043e\u0432 \u0442\u0443\u0440\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0444\u0438\u0440\u043c\u044b \u0425\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0438 \u0442\u0443\u0440\u0430, \u0442\u0443\u0440\u0430\u0433\u0435\u043d\u0441\u0442\u0432\u0435, \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u0442\u0443\u0440\u0430, \u043f\u0435\u0440\u0438\u043e\u0434\u0435 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0442\u0443\u0440\u0430, \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u043e\u043f\u043b\u0430\u0442\u044b. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b: 1) \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439. 2) \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438 \u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u043e\u0432. \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0441\u0432\u043e\u0438\u0445 \u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439. 3) \u041d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u0442\u0437\u044b\u0432\u043e\u0432 \u043a \u0442\u0443\u0440\u0430\u043c. \u041f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432, \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c\u0441\u044f \u0434\u0430\u0442\u044b \u0442\u0443\u0440\u0430, \u0442\u0435\u043a\u0441\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f, \u0440\u0435\u0439\u0442\u0438\u043d\u0433 (1-10), \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0442\u043e\u0440\u0435. 4) \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u0430 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Django-admin. 5) \u0412 \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430, \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0449\u0430\u044f \u0432\u0441\u0435 \u043f\u0440\u043e\u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u0443\u0440\u044b \u043f\u043e \u0441\u0442\u0440\u0430\u043d\u0430\u043c.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},{"location":"#_2","text":"models.py from django.db import models from django.contrib.auth import get_user_model from django.contrib.auth.models import AbstractUser class User(AbstractUser): username = models.CharField(\"username\", max_length=150, unique=True) password = models.CharField(max_length=30, null=False) passport_data = models.CharField(max_length=30, null=False) email = models.EmailField(\"email address\", unique=True) tour = models.ManyToManyField(\"self\", through=\"Reservation\") phone_number = models.IntegerField(null=True) class Tour(models.Model): payment_by = [('\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0435', '\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0435'), ('\u041e\u043d\u043b\u0430\u0439\u043d \u043e\u043f\u043b\u0430\u0442\u0430', '\u041e\u043d\u043b\u0430\u0439\u043d \u043e\u043f\u043b\u0430\u0442\u0430')] naming = models.CharField(max_length=50, null=False) country = models.CharField(max_length=30, null=False) city = models.CharField(max_length=30, null=False) description = models.CharField(max_length=2000, null=False) paid_with = models.CharField(max_length=13, choices=payment_by) start_date = models.DateField() end_date = models.DateField() class Feedback(models.Model): User = get_user_model() rating = [(1, '1'), (2, '2'), (3, '3'), (3, '3'), (4, '4'), (5, '5'), (6, '6'), (7, '7'), (8, '8'), (9, '9'), (10, '10')] username = models.ForeignKey('User', on_delete=models.CASCADE) comment = models.CharField(max_length=5000) tour = models.ForeignKey(\"Tour\", on_delete=models.CASCADE) user_rating = models.IntegerField(choices=rating) date_of_publication = models.DateField() start_date = models.DateField() end_date = models.DateField() class Reservation(models.Model): User = get_user_model() username = models.ForeignKey('User', on_delete=models.CASCADE) tour = models.ForeignKey('Tour', on_delete=models.CASCADE) start_date = models.DateField(null=True) end_date = models.DateField(null=True) status = models.BooleanField(null=True) forms.py from django import forms from django.contrib.auth.forms import UserCreationForm from .models import * class RegistrationForm(UserCreationForm): class Meta: model = User fields = ['username', 'password1', 'password2', 'email', 'passport_data', 'phone_number'] class LoginForm(forms.ModelForm): class Meta: model = User fields = ['username', 'password'] class CreateCommentForm(forms.ModelForm): class Meta: model = Feedback fields = ('username', 'start_date', 'tour', 'end_date', 'user_rating', 'comment', 'date_of_publication') def __init__(self, *args, **kwargs): super(CreateCommentForm, self).__init__(*args, **kwargs) self.fields['username'].disabled = True class CreateReservationForm(forms.ModelForm): class Meta: model = Reservation fields = ('username', 'tour', 'start_date', 'end_date') def __init__(self, *args, **kwargs): super(CreateReservationForm, self).__init__(*args, **kwargs) self.fields['username'].disabled = True self.fields['tour'].disabled = True views.py from django.http import HttpResponse from django.shortcuts import render, redirect, get_object_or_404 from django.views.generic import CreateView, ListView, UpdateView, DeleteView from .forms import * from .models import * from django.contrib.auth import authenticate, login, logout def homepage(request): return render(request, 'main.html') def profile(request): return render(request, 'profile.html') def register(request): if request.method == 'POST': form = RegistrationForm(request.POST) if form.is_valid(): form.save() username = form.cleaned_data['username'] password = form.cleaned_data['password1'] user = authenticate(username=username, password=password) login(request, user) return redirect('/profile') else: form = RegistrationForm() visual = {'form': form} return render(request, 'registration/signin.html', visual) def user_login(request): global form if request.method == \"POST\": username = request.POST['username'] password = request.POST['password'] user = authenticate(request, username=username, password=password) if user is not None: if user.is_active: login(request, user) return redirect('/main') else: return HttpResponse('\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!') else: form = LoginForm() return render(request, 'registration/login.html', {'form': form}) def log_out(request): logout(request) return redirect('/main') class CreateReservation(CreateView): form_class = CreateReservationForm model = Reservation template_name = 'reservation.html' context_object_name = 'reservation' success_url = '/profile' def get_initial(self): initial = super(CreateReservation, self).get_initial() initial = initial.copy() initial['username'] = self.request.user.pk initial['tour'] = get_object_or_404(Tour, pk=self.kwargs['pk']) return initial class UpdateReserveView(UpdateView): model = Reservation fields = ['start_date', 'end_date'] template_name = 'upreservation.html' context_object_name = 'reservation' success_url = '/profile' class DeleteReserveView(DeleteView): model = Reservation template_name = 'delreservation.html' context_object_name = 'reservation' success_url = '/profile' def reservedtourlist(request): visual = {\"reservations\": Reservation.objects.all()} return render(request, 'reservedtour.html', visual) class listreservations(ListView): template_name = 'profilereservations.html' context_object_name = 'reservation_list' def get_queryset(self): self.user = self.request.user.pk return Reservation.objects.filter(username=self.user) def commentlist(request): visual = {\"comments\": Feedback.objects.all()} return render(request, 'comments.html', visual) def tourlist(request): visual = {\"tours\": Tour.objects.all()} return render(request, 'tours.html', visual) class CreateComment(CreateView): form_class = CreateCommentForm model = Feedback template_name = 'comment.html' context_object_name = 'comment' success_url = '/comments' def get_initial(self): initial = super(CreateComment, self).get_initial() initial = initial.copy() initial['username'] = self.request.user.pk return initial urls.py from django.urls import path from . import views from .views import * urlpatterns = [ path('main/', views.homepage), path('profile/', views.profile), path('login/', views.user_login, name='login'), path('register/', register, name='register'), path('logout/', views.log_out), path('reservedtour/', views.reservedtourlist), path('comments/', views.commentlist), path('createcomment/', CreateComment.as_view()), path('tours/', views.tourlist), path('tours/<int:pk>/reservation', CreateReservation.as_view(), name='reservation'), path('profilereservations/', listreservations.as_view(), name='reservations'), path('profilereservations/deletereservation/<int:pk>/', views.DeleteReserveView.as_view()), path('profilereservations/updatereservation/<int:pk>/', views.UpdateReserveView.as_view()) ]","title":"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u043e\u0435\u043a\u0442\u0430:"},{"location":"lab1/","text":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u21161. \u0415\u0432\u0434\u043e\u043a\u0438\u043c\u043e\u0432 \u0412\u043b\u0430\u0434\u0438\u0441\u043b\u0430\u0432 \u041a33421 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0441\u043e\u043a\u0435\u0442\u0430\u043c\u0438 \u0426\u0435\u043b\u044c: \u043e\u0432\u043b\u0430\u0434\u0435\u0442\u044c \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043d\u0430\u0432\u044b\u043a\u0430\u043c\u0438 \u0438 \u0443\u043c\u0435\u043d\u0438\u044f\u043c\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 web-\u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u043e\u043a\u0435\u0442\u043e\u0432. Task 1: \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u043e\u0442\u0441\u044b\u043b\u0430\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u00abHello, server\u00bb. \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0442\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0421\u0435\u0440\u0432\u0435\u0440 \u0432 \u043e\u0442\u0432\u0435\u0442 \u043e\u0442\u0441\u044b\u043b\u0430\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u00abHello, client\u00bb. \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430. \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443 socket \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430 UDP client.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 6666)) sock.send(bytes(\"Hello, server!!!\", \"utf-8\")) msg = sock.recv(1024) print(msg.decode(\"utf-8\")) server.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('', 6666)) sock.listen(1) clientsocket, addr = sock.accept() msg = clientsocket.recv(1024) print(msg.decode(\"utf-8\")) clientsocket.send(bytes(\"Hello, client!!!!\", \"utf-8\")) clientsocket.close() Task 2: \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u0443 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438, \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u0432\u043e\u0434\u044f\u0442\u0441\u044f \u0441 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b. \u0421\u0435\u0440\u0432\u0435\u0440 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443. \u0412\u0430\u0440\u0438\u0430\u043d\u0442: \u041f\u043e\u0438\u0441\u043a \u043f\u043b\u043e\u0449\u0430\u0434\u0438 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u0430. client.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 5675)) while True: try: data = sock.recv(1024) print(data.decode('utf-8')) sock.send(input().encode('utf-8')) except KeyboardInterrupt: sock.close() break sock.close() server.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('localhost', 5675)) sock.listen(1) conn, addr = sock.accept() while True: conn.send(\"Enter figure's base and height lengths in form like x, y:\".encode('utf-8')) try: data = conn.recv(1024) a, h = data.decode('utf-8').split(', ') s = (int(a) * int(h)) print('Area is', s) except KeyboardInterrupt: conn.close() break sock.close() Task 3: \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u0412 \u043e\u0442\u0432\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 http-\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0435\u0435 html-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u0435\u0440\u0432\u0435\u0440 \u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0438\u0437 \u0444\u0430\u0439\u043b\u0430 index.html. client.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 6060)) while True: data = sock.recv(1024) if not data: break print(data.decode(\"utf-8\")) sock.close() server.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('localhost', 6060)) sock.listen(1) conn, addr = sock.accept() conn.sendall(b\"HTTP/1.0 200 OK\\nContent-Type: text/html\\n\\n\" + open(\"index.html\", \"rb\").read()) conn.close() index.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <title>Title</title> </head> <body> <h1>Hey there fella</h1> </body> </html> Task 4: \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0432\u0443\u0445\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0438\u043b\u0438 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0447\u0430\u0441\u0430 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0431\u0430\u043b\u043b\u043e\u0432. \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443. \u0414\u043b\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e UDP, thearding \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430. \u0414\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441 TCP \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0418 \u043f\u0440\u0438\u0435\u043c \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432\u0441\u0435\u043c \u044e\u0437\u0435\u0440\u0430\u043c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0432 \u043f\u043e\u0442\u043e\u043a\u0430\u0445. \u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u044e\u0437\u0435\u0440\u043e\u0432, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0442\u043e\u043c \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0438\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f. server4.py import asyncio import socket connections = [] async def handle_client(client, address): request = None while request != '\u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c': request = (await loop.sock_recv(client, 255)).decode('utf8') response = f'User{address}: ' + str(request) if request == '\u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c': response = f'User {address} left the chat' for client_ in connections: if client_ == client: continue await loop.sock_sendall(client_, response.encode('utf8')) connections.remove(client) print(f'Client: {address} disconnected') client.close() async def run_server(): while True: client, address = await loop.sock_accept(server) if client not in connections: connections.append(client) print(f'Client {address} connected to the chat!') loop.create_task(handle_client(client, address)) server = socket.socket(socket.AF_INET, socket.SOCK_STREAM) server.bind(('localhost', 53330)) server.listen(8) server.setblocking(False) loop = asyncio.get_event_loop() loop.run_until_complete(run_server()) client4_1.py import socket from threading import Thread class Client: def __init__(self, port): self._socket = socket.socket(family=socket.AF_INET, type=socket.SOCK_STREAM, proto=0) self._socket.connect(('127.0.0.1', port)) def get(self): while True: try: data = self._socket.recv(1024) print(data.decode('utf-8')) except OSError: exit() def send(self): while True: message = input() if message == '\u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c': self._socket.send(bytes(f'{message}', 'utf-8')) self._socket.close() break self._socket.send(bytes(f'{message}', 'utf-8')) if __name__ == '__main__': clint = Client(53330) th_1, th_2 = Thread(target=clint.send), Thread(target=clint.get) th_1.start(), th_2.start() client4_2.py import socket from threading import Thread class Client: def __init__(self, port): self._socket = socket.socket(family=socket.AF_INET, type=socket.SOCK_STREAM, proto=0) self._socket.connect(('127.0.0.1', port)) def get(self): while True: try: data = self._socket.recv(1024) print(data.decode('utf-8')) except OSError: exit() def send(self): while True: message = input() if message == '\u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c': self._socket.send(bytes(f'{message}', 'utf-8')) self._socket.close() break self._socket.send(bytes(f'{message}', 'utf-8')) if __name__ == '__main__': clint = Client(53330) th_1, th_2 = Thread(target=clint.send), Thread(target=clint.get) th_1.start(), th_2.start() client4_3.py import socket from threading import Thread class Client: def __init__(self, port): self._socket = socket.socket(family=socket.AF_INET, type=socket.SOCK_STREAM, proto=0) self._socket.connect(('127.0.0.1', port)) def get(self): while True: try: data = self._socket.recv(1024) print(data.decode('utf-8')) except OSError: exit() def send(self): while True: message = input() if message == '\u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c': self._socket.send(bytes(f'{message}', 'utf-8')) self._socket.close() break self._socket.send(bytes(f'{message}', 'utf-8')) if __name__ == '__main__': clint = Client(53330) th_1, th_2 = Thread(target=clint.send), Thread(target=clint.get) th_1.start(), th_2.start() Task 5: \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u043e\u0439 web-\u0441\u0435\u0440\u0432\u0435\u0440 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 GET \u0438 POST http \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Python \u0438 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 socket. \u0417\u0430\u0434\u0430\u043d\u0438\u0435: \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442: \u25cf \u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0438 \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435 \u0438 \u043e\u0446\u0435\u043d\u043a\u0435 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435. \u25cf \u041e\u0442\u0434\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e\u0431\u043e \u0432\u0441\u0435\u0445 \u043e\u0446\u0435\u043d\u0430\u0445 \u043f\u043e \u0434\u0441\u0438\u0446\u0438\u043f\u043b\u0438\u043d\u0435 \u0432 \u0432\u0438\u0434\u0435 html-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b. server5.py import socket class MyHTTPServer: def __init__(self, host, port): self.host = host self.port = port def serve_forever(self): sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind((self.host, self.port)) sock.listen(5) while True: clientsocket, _ = sock.accept() self.serve_client(clientsocket) def serve_client(self, clientsocket): data = clientsocket.recv(16384) data = data.decode('utf-8') target, method = self.parse_request(data) headers, body = self.parse_headers(data) resp = self.handle_request(method, body) if resp: self.send_response(clientsocket, resp) def parse_request(self, data): data = data.replace('\\r', '') lines = data.split('\\n') method, target, protocol = lines[0].split() return target, method def parse_headers(self, data): data = data.replace('\\r', '') lines = data.split('\\n') i = lines.index('') headers = lines[1:i] body = lines[-1] return headers, body def handle_request(self, method, body): if method == \"GET\": resp = \"HTTP/1.1 200 OK\\n\\n\" with open('index.html') as f: resp += f.read() return resp if method == \"POST\": newbody = body.split('&') for content in newbody: if content.split('=')[0] == 'subject': subjects.append(content.split('=')[1]) if content.split('=')[0] == 'mark': marks.append(content.split('=')[1]) resp = \"HTTP/1.1 200 OK\\n\\n\" resp += \"<html><head><title>Journal</title></head><body>\" for s, m in zip(subjects, marks): resp += f\"<p>{s}: {m}</p>\" resp += \"</body></html>\" return resp def send_response(self, clientsocket, resp): clientsocket.send(resp.encode('utf-8')) if __name__ == '__main__': host = 'localhost' port = 6767 serv = MyHTTPServer(host, port) subjects = [] marks = [] try: serv.serve_forever() except KeyboardInterrupt: pass index.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <title>Journal</title> </head> <body> <form action=\"/\" method=\"post\"> <div> <label for=\"name\">Subject:</label> <input type=\"text\" id=\"name\" name=\"subject\"/> </div> <div> <label for=\"mail\">Mark:</label> <input type=\"number\" id=\"mail\" name=\"mark\"/> </div> <div> <input type=\"submit\"> </div> </body> </html>","title":"\u041b\u0430\u0431\u0430 \u21161"},{"location":"lab1/#no1-33421","text":"","title":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u21161. \u0415\u0432\u0434\u043e\u043a\u0438\u043c\u043e\u0432 \u0412\u043b\u0430\u0434\u0438\u0441\u043b\u0430\u0432 \u041a33421"},{"location":"lab1/#_1","text":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0441\u043e\u043a\u0435\u0442\u0430\u043c\u0438 \u0426\u0435\u043b\u044c: \u043e\u0432\u043b\u0430\u0434\u0435\u0442\u044c \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043d\u0430\u0432\u044b\u043a\u0430\u043c\u0438 \u0438 \u0443\u043c\u0435\u043d\u0438\u044f\u043c\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 web-\u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u043e\u043a\u0435\u0442\u043e\u0432.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},{"location":"lab1/#task-1","text":"\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u043e\u0442\u0441\u044b\u043b\u0430\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u00abHello, server\u00bb. \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0442\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0421\u0435\u0440\u0432\u0435\u0440 \u0432 \u043e\u0442\u0432\u0435\u0442 \u043e\u0442\u0441\u044b\u043b\u0430\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u00abHello, client\u00bb. \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430. \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443 socket \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430 UDP client.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 6666)) sock.send(bytes(\"Hello, server!!!\", \"utf-8\")) msg = sock.recv(1024) print(msg.decode(\"utf-8\")) server.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('', 6666)) sock.listen(1) clientsocket, addr = sock.accept() msg = clientsocket.recv(1024) print(msg.decode(\"utf-8\")) clientsocket.send(bytes(\"Hello, client!!!!\", \"utf-8\")) clientsocket.close()","title":"Task 1:"},{"location":"lab1/#task-2","text":"\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u0443 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438, \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u0432\u043e\u0434\u044f\u0442\u0441\u044f \u0441 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b. \u0421\u0435\u0440\u0432\u0435\u0440 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443. \u0412\u0430\u0440\u0438\u0430\u043d\u0442: \u041f\u043e\u0438\u0441\u043a \u043f\u043b\u043e\u0449\u0430\u0434\u0438 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u0430. client.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 5675)) while True: try: data = sock.recv(1024) print(data.decode('utf-8')) sock.send(input().encode('utf-8')) except KeyboardInterrupt: sock.close() break sock.close() server.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('localhost', 5675)) sock.listen(1) conn, addr = sock.accept() while True: conn.send(\"Enter figure's base and height lengths in form like x, y:\".encode('utf-8')) try: data = conn.recv(1024) a, h = data.decode('utf-8').split(', ') s = (int(a) * int(h)) print('Area is', s) except KeyboardInterrupt: conn.close() break sock.close()","title":"Task 2:"},{"location":"lab1/#task-3","text":"\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u0412 \u043e\u0442\u0432\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 http-\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0435\u0435 html-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u0435\u0440\u0432\u0435\u0440 \u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0438\u0437 \u0444\u0430\u0439\u043b\u0430 index.html. client.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 6060)) while True: data = sock.recv(1024) if not data: break print(data.decode(\"utf-8\")) sock.close() server.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('localhost', 6060)) sock.listen(1) conn, addr = sock.accept() conn.sendall(b\"HTTP/1.0 200 OK\\nContent-Type: text/html\\n\\n\" + open(\"index.html\", \"rb\").read()) conn.close() index.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <title>Title</title> </head> <body> <h1>Hey there fella</h1> </body> </html>","title":"Task 3:"},{"location":"lab1/#task-4","text":"\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0432\u0443\u0445\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0438\u043b\u0438 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0447\u0430\u0441\u0430 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0431\u0430\u043b\u043b\u043e\u0432. \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443. \u0414\u043b\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e UDP, thearding \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430. \u0414\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441 TCP \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0418 \u043f\u0440\u0438\u0435\u043c \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432\u0441\u0435\u043c \u044e\u0437\u0435\u0440\u0430\u043c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0432 \u043f\u043e\u0442\u043e\u043a\u0430\u0445. \u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u044e\u0437\u0435\u0440\u043e\u0432, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0442\u043e\u043c \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0438\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f. server4.py import asyncio import socket connections = [] async def handle_client(client, address): request = None while request != '\u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c': request = (await loop.sock_recv(client, 255)).decode('utf8') response = f'User{address}: ' + str(request) if request == '\u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c': response = f'User {address} left the chat' for client_ in connections: if client_ == client: continue await loop.sock_sendall(client_, response.encode('utf8')) connections.remove(client) print(f'Client: {address} disconnected') client.close() async def run_server(): while True: client, address = await loop.sock_accept(server) if client not in connections: connections.append(client) print(f'Client {address} connected to the chat!') loop.create_task(handle_client(client, address)) server = socket.socket(socket.AF_INET, socket.SOCK_STREAM) server.bind(('localhost', 53330)) server.listen(8) server.setblocking(False) loop = asyncio.get_event_loop() loop.run_until_complete(run_server()) client4_1.py import socket from threading import Thread class Client: def __init__(self, port): self._socket = socket.socket(family=socket.AF_INET, type=socket.SOCK_STREAM, proto=0) self._socket.connect(('127.0.0.1', port)) def get(self): while True: try: data = self._socket.recv(1024) print(data.decode('utf-8')) except OSError: exit() def send(self): while True: message = input() if message == '\u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c': self._socket.send(bytes(f'{message}', 'utf-8')) self._socket.close() break self._socket.send(bytes(f'{message}', 'utf-8')) if __name__ == '__main__': clint = Client(53330) th_1, th_2 = Thread(target=clint.send), Thread(target=clint.get) th_1.start(), th_2.start() client4_2.py import socket from threading import Thread class Client: def __init__(self, port): self._socket = socket.socket(family=socket.AF_INET, type=socket.SOCK_STREAM, proto=0) self._socket.connect(('127.0.0.1', port)) def get(self): while True: try: data = self._socket.recv(1024) print(data.decode('utf-8')) except OSError: exit() def send(self): while True: message = input() if message == '\u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c': self._socket.send(bytes(f'{message}', 'utf-8')) self._socket.close() break self._socket.send(bytes(f'{message}', 'utf-8')) if __name__ == '__main__': clint = Client(53330) th_1, th_2 = Thread(target=clint.send), Thread(target=clint.get) th_1.start(), th_2.start() client4_3.py import socket from threading import Thread class Client: def __init__(self, port): self._socket = socket.socket(family=socket.AF_INET, type=socket.SOCK_STREAM, proto=0) self._socket.connect(('127.0.0.1', port)) def get(self): while True: try: data = self._socket.recv(1024) print(data.decode('utf-8')) except OSError: exit() def send(self): while True: message = input() if message == '\u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c': self._socket.send(bytes(f'{message}', 'utf-8')) self._socket.close() break self._socket.send(bytes(f'{message}', 'utf-8')) if __name__ == '__main__': clint = Client(53330) th_1, th_2 = Thread(target=clint.send), Thread(target=clint.get) th_1.start(), th_2.start()","title":"Task 4:"},{"location":"lab1/#task-5","text":"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u043e\u0439 web-\u0441\u0435\u0440\u0432\u0435\u0440 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 GET \u0438 POST http \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Python \u0438 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 socket. \u0417\u0430\u0434\u0430\u043d\u0438\u0435: \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442: \u25cf \u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0438 \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435 \u0438 \u043e\u0446\u0435\u043d\u043a\u0435 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435. \u25cf \u041e\u0442\u0434\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e\u0431\u043e \u0432\u0441\u0435\u0445 \u043e\u0446\u0435\u043d\u0430\u0445 \u043f\u043e \u0434\u0441\u0438\u0446\u0438\u043f\u043b\u0438\u043d\u0435 \u0432 \u0432\u0438\u0434\u0435 html-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b. server5.py import socket class MyHTTPServer: def __init__(self, host, port): self.host = host self.port = port def serve_forever(self): sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind((self.host, self.port)) sock.listen(5) while True: clientsocket, _ = sock.accept() self.serve_client(clientsocket) def serve_client(self, clientsocket): data = clientsocket.recv(16384) data = data.decode('utf-8') target, method = self.parse_request(data) headers, body = self.parse_headers(data) resp = self.handle_request(method, body) if resp: self.send_response(clientsocket, resp) def parse_request(self, data): data = data.replace('\\r', '') lines = data.split('\\n') method, target, protocol = lines[0].split() return target, method def parse_headers(self, data): data = data.replace('\\r', '') lines = data.split('\\n') i = lines.index('') headers = lines[1:i] body = lines[-1] return headers, body def handle_request(self, method, body): if method == \"GET\": resp = \"HTTP/1.1 200 OK\\n\\n\" with open('index.html') as f: resp += f.read() return resp if method == \"POST\": newbody = body.split('&') for content in newbody: if content.split('=')[0] == 'subject': subjects.append(content.split('=')[1]) if content.split('=')[0] == 'mark': marks.append(content.split('=')[1]) resp = \"HTTP/1.1 200 OK\\n\\n\" resp += \"<html><head><title>Journal</title></head><body>\" for s, m in zip(subjects, marks): resp += f\"<p>{s}: {m}</p>\" resp += \"</body></html>\" return resp def send_response(self, clientsocket, resp): clientsocket.send(resp.encode('utf-8')) if __name__ == '__main__': host = 'localhost' port = 6767 serv = MyHTTPServer(host, port) subjects = [] marks = [] try: serv.serve_forever() except KeyboardInterrupt: pass index.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <title>Journal</title> </head> <body> <form action=\"/\" method=\"post\"> <div> <label for=\"name\">Subject:</label> <input type=\"text\" id=\"name\" name=\"subject\"/> </div> <div> <label for=\"mail\">Mark:</label> <input type=\"number\" id=\"mail\" name=\"mark\"/> </div> <div> <input type=\"submit\"> </div> </body> </html>","title":"Task 5:"},{"location":"lab4/","text":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u21164. \u0415\u0432\u0434\u043e\u043a\u0438\u043c\u043e\u0432 \u0412\u043b\u0430\u0434\u0438\u0441\u043b\u0430\u0432 \u041a33421 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0444\u0440\u043e\u043d\u0442\u0435\u043d\u0434\u0430 \u0426\u0435\u043b\u044c: \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0433\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0430\u0439\u0442\u0430 (\u0444\u0440\u043e\u043d\u0442\u0435\u043d\u0434\u0430) \u0441 \u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0446\u0438\u0435\u0439 \u0441 \u0431\u044d\u043a\u044d\u043d\u0434\u043e\u043c \u043f\u043e API. App.vue: <template> <v-app> <v-app-bar app color=\"gray\" dark > <div class=\"d-flex align-center\"> <h1 class=\"headline\">\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u043e\u0435 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u043e </h1> </div> <v-spacer></v-spacer> <v-btn v-if='auth' icon @click='AccountDetails'> <v-icon>mdi-account</v-icon> </v-btn> <div class=\"mx-2\"></div> <v-btn icon @click='goHome'> <v-icon>mdi-home</v-icon> </v-btn> <div class=\"mx-2\"></div> <v-btn icon> <v-icon v-if='!auth' @click='login' >mdi-login-variant</v-icon> <v-icon v-if='auth' @click='logout' >mdi-logout-variant</v-icon> </v-btn> </v-app-bar> <v-main class=\"d-flex align-center text-center\"> <router-view /> </v-main> </v-app> </template> <script> import $ from 'jquery' export default { name: 'App', created () { if (localStorage.getItem('token')) { $.ajaxSetup({ headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) } }, computed: { auth () { return !!localStorage.getItem('token'); } }, methods: { login () { this.$router.push({ name: 'signin' }) }, logout () { localStorage.removeItem('token') window.location = '/' }, goHome () { this.$router.push({ name: 'about' }) }, AccountDetails () { this.$router.push({ name: 'accountdetails' }) } }, data: () => ({ // }) } </script> SignUp.vue <template> <div class=\"signup\"> <v-form @submit.prevent=\"signUp\" ref=\"signUpForm\" class=\"my-2\" > <v-row> <v-col cols=\"3\" class=\"mx-auto\"> <v-text-field label=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f\" v-model=\"signUpForm.first_name\" :rules=\"rules.required\" /> <v-text-field label=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e\" v-model=\"signUpForm.last_name\" :rules=\"rules.required\" /> <v-select :items=\"roles\" label=\"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u044c\" v-model=\"signUpForm.role\" :rules=\"rules.required\" ></v-select> <v-text-field label=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\" v-model=\"signUpForm.tel\" :rules=\"rules.required\" /> <v-text-field label=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email\" v-model=\"signUpForm.email\" :rules=\"rules.required\" /> <v-text-field label=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\" v-model=\"signUpForm.username\" :rules=\"rules.required\" /> <v-text-field label=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c\" v-model=\"signUpForm.password\" type=\"password\" :rules=\"[rules.required, rules.counter9]\" /> <v-btn type=\"submit\" color=\"primary\" dark>\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f</v-btn> <p class=\"mt-5\">\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? <router-link to=\"/signin\">\u0412\u043e\u0439\u0442\u0438</router-link></p> </v-col> </v-row> </v-form> </div> </template> <script> export default { name: 'SignUp', data: () => ({ signUpForm: { first_name: '', last_name: '', role: '', tel: '', email: '', username: '', password: '' }, roles: ['\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440', '\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440', '\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440'], rules: { required: value => !!value || 'Required.', counter9: value => value.length <= 9 || 'Min 9 characters' } }), methods: { async signUp () { if (this.signUpForm.role === '\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440') { this.signUpForm.role = '\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440' } else if (this.signUpForm.role === '\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440') { this.signUpForm.role = '\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440' } else if (this.signUpForm.role === '\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440') { this.signUpForm.role = '\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440' } try { const response = await this.axios .post('http://127.0.0.1:8000/auth/users/', this.signUpForm) if (response.status !== 201) { throw new Error(response.status) } this.$refs.signUpForm.reset() await this.$router.push({ name: 'signin' }) } catch (e) { console.error('AN API ERROR', e) } } } } </script> LogIn.vue: <template> <div> <input v-model=\"login\" type=\"text\" placeholder=\"\u041b\u043e\u0433\u0438\u043d\"/> <input v-model=\"password\" type=\"password\" placeholder=\"\u041f\u0430\u0440\u043e\u043b\u044c\"/> <button @click=\"setLogin\">\u0412\u043e\u0439\u0442\u0438</button> </div> </template> <script> import $ from 'jquery' export default { name: 'Login', data () { return { login: '', password: '' } }, methods: { setLogin () { $.ajax({ url: 'http://127.0.0.1:8000/auth/token/login/', type: 'POST', data: { username: this.login, password: this.password }, success: (response) => { alert('\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0447\u0442\u043e \u0412\u044b \u0441 \u043d\u0430\u043c\u0438') sessionStorage.setItem('auth_token', response.data.attributes.auth_token) this.$router.push({ name: 'home' }) }, error: (response) => { if (response.status === 400) { alert('\u041b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0432\u0435\u0440\u0435\u043d') } } }) } } } </script> <style scoped> </style> AccountDetail.vue <template> <v-container> <v-row> <v-col cols=\"2\"> <v-card> <nav-drawer/> </v-card> </v-col> <v-col cols=\"10\"> <AccountDetailsCard/> </v-col> </v-row> </v-container> </template> <script> import NavDrawer from '@/components/NavDrawer' import AccountDetailsCard from '@/components/AccountDetailsCard' export default { name: 'AccountDetails', components: { NavDrawer, AccountDetailsCard } } </script> About.vue <template> <v-container> <v-row> <v-col cols=\"2\"> <v-card> <nav-drawer v-if='auth'/> </v-card> </v-col> <v-col cols=\"10\"> <v-card> <h3>\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0443\u0447\u0451\u0442\u0430 \"\u041b\u0443\u0447-\u0430\u0433\u0435\u043d\u0441\u0442\u0432\u043e\"</h3> </v-card> </v-col> </v-row> </v-container> </template> <script> import NavDrawer from '@/components/NavDrawer' export default { name: 'About', components: { NavDrawer }, computed: { auth () { return !!localStorage.getItem('token'); } } } </script> <style scoped> </style> NavDrawer.vue: <template> <v-card> <v-navigation-drawer floating permanent width=\"320\" > <v-list dense rounded > <v-list-item v-for=\"item in items\" :key=\"item.title\" @click=item.link > <v-list-item-icon> <v-icon>{{ item.icon }}</v-icon> </v-list-item-icon> <v-list-item-content> <v-list-item-title>{{ item.title }}</v-list-item-title> </v-list-item-content> </v-list-item> </v-list> </v-navigation-drawer> </v-card> </template> <script> export default { name: 'NavDrawer', data () { return { items: [ { title: '\u041a\u043b\u0438\u0435\u043d\u0442\u044b', icon: 'mdi-account', link: this.client }, { title: '\u041f\u0440\u0430\u0439\u0441-\u043b\u0438\u0441\u0442 \u043d\u0430 \u0443\u0441\u043b\u0443\u0433\u0438', icon: 'mdi-format-list-bulleted', link: this.servicePL }, { title: '\u041f\u0440\u0430\u0439\u0441-\u043b\u0438\u0441\u0442 \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b', icon: 'mdi-format-list-bulleted', link: this.materialsPL }, { title: '\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0438', icon: 'mdi-account-tie', link: this.executor }, { title: '\u0417\u0430\u044f\u0432\u043a\u0438', icon: 'mdi-account-question', link: this.request }, { title: '\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438', icon: 'mdi-cart-arrow-down', link: this.chosenServices }, { title: '\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b', icon: 'mdi-cart-arrow-down', link: this.chosenMaterials }, { title: '\u0420\u0430\u0431\u043e\u0447\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b', icon: 'mdi-account-group', link: this.workGroup }, { title: '\u0421\u0447\u0435\u0442\u0430 \u043d\u0430 \u043e\u043f\u043b\u0430\u0442\u0443', icon: 'mdi-cash', link: this.invoice }, { title: '\u041f\u043b\u0430\u0442\u0435\u0436\u043d\u044b\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f', icon: 'mdi-cash-check', link: this.paymentOrder } ] } }, methods: { client () { this.$router.push({ name: 'client' }) }, servicePL () { this.$router.push({ name: 'servicepl' }) }, materialsPL () { this.$router.push({ name: 'materialspl' }) }, executor () { this.$router.push({ name: 'executor' }) }, request () { this.$router.push({ name: 'request' }) }, chosenServices () { this.$router.push({ name: 'chosenservices' }) }, chosenMaterials () { this.$router.push({ name: 'chosenmaterials' }) }, workGroup () { this.$router.push({ name: 'workgroup' }) }, invoice () { this.$router.push({ name: 'invoice' }) }, paymentOrder () { this.$router.push({ name: 'paymentorder' }) } } } </script> <style scoped> </style> AccountDetailsCard.vue <template> <v-container> <v-row> <h1>\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \"{{ EditedItem.username }}\"</h1> <p></p> </v-row> <v-row> <v-text-field v-model=\"EditedItem.first_name\" label=\"\u0418\u043c\u044f\" required ></v-text-field> </v-row> <v-row> <v-text-field v-model=\"EditedItem.last_name\" label=\"\u0424\u0430\u043c\u0438\u043b\u0438\u044f\" required ></v-text-field> </v-row> <v-row> <v-text-field v-model=\"EditedItem.tel\" label=\"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\" required ></v-text-field> </v-row> <v-row> <v-text-field v-model=\"EditedItem.role\" label=\"\u0420\u043e\u043b\u044c\" required ></v-text-field> </v-row> <v-btn color=\"anchor\" class=\"mr-4\" @click=\"reset\" > \u041e\u0442\u043c\u0435\u043d\u0430 </v-btn> <v-btn color=\"primary\" class=\"mr-4\" @click=\"ChangeAccountDetails\" > \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f </v-btn> </v-container> </template> <script> export default { data: () => ({ AccountDetails: [], EditedItem: [], data: {} }), created () { this.GetAccountDetails() }, methods: { async GetAccountDetails () { try { const response = await this.axios .get('http://127.0.0.1:8000/auth/users/me/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.AccountDetails = response.data this.EditedItem = response.data } catch (e) { console.error('AN API ERROR', e) } }, async ChangeAccountDetails () { try { const response = await this.axios .patch('http://127.0.0.1:8000/auth/users/me/', JSON.stringify(this.EditedItem), { headers: { Authorization: 'Token ' + localStorage.getItem('token'), 'Content-Type': 'application/json' } }) if (response.status !== 200) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, reset () { this.EditedItem = this.AccountDetails window.location.reload() } } } </script> ChosenMaterialsTableCard.vue <template> <v-data-table :headers=\"headers\" :items=\"chosenmaterials\" class=\"elevation-1\" > <template v-slot:top> <v-toolbar flat > <v-toolbar-title>\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b</v-toolbar-title> <v-divider class=\"mx-4\" inset vertical ></v-divider> <v-spacer></v-spacer> <v-dialog v-model=\"dialog\" max-width=\"500px\" > <template v-slot:activator=\"{ on, attrs }\"> <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\" > \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b </v-btn> </template> <v-card> <v-card-title> <span class=\"headline\">{{ chosenmaterialsForm }}</span> </v-card-title> <v-card-text> <v-container> <v-row> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-select :items=materials item-text=\"title\" item-value=\"id\" label=\"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\" v-model=\"editedItem.material\" :rules=\"rules.requireds\" ></v-select> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-select :items=requests item-text=\"id\" item-value=\"editedItem.req\" label=\"\u0417\u0430\u044f\u0432\u043a\u0430\" v-model=\"editedItem.req\" :rules=\"rules.requireds\" ></v-select> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.total_cost\" label=\"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c\" type=\"number\" :rules=\"[rules.required, rules.counter30]\" ></v-text-field> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.amount\" label=\"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\" :rules=\"rules.required\" type=\"number\" ></v-text-field> </v-col> </v-row> </v-container> </v-card-text> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"close\" > \u041e\u0442\u043c\u0435\u043d\u0430 </v-btn> <v-btn color=\"blue darken-1\" text @click=\"save\" > \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c </v-btn> </v-card-actions> </v-card> </v-dialog> <v-dialog v-model=\"dialogDelete\" max-width=\"500px\"> <v-card> <v-card-title class=\"headline\">\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u0445?</v-card-title> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">\u041e\u0442\u043c\u0435\u043d\u0430</v-btn> <v-btn color=\"blue darken-1\" text @click=\"DeleteChosenMaterials\">\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c</v-btn> <v-spacer></v-spacer> </v-card-actions> </v-card> </v-dialog> </v-toolbar> </template> <template v-slot:[`item.actions`]=\"{ item }\"> <v-icon small class=\"mr-2\" @click=\"editItem(item)\" > mdi-pencil </v-icon> <v-icon small @click=\"deleteItem(item)\" > mdi-delete </v-icon> </template> </v-data-table> </template> <script> export default { data: () => ({ chosenmaterials: [], materials: [], requests: [], rules: { required: value => !!value || 'Required.', requireds: [(value) => value.length > 0 || 'Required.'], counter30: value => value.length <= 30 || 'Max 30 characters' }, dialog: false, dialogDelete: false, headers: [ { text: 'ID', value: 'id' }, { text: '\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b', value: 'material' }, { text: '\u0417\u0430\u044f\u0432\u043a\u0430', value: 'req' }, { text: '\u0426\u0435\u043d\u0430', value: 'total_cost' }, { text: '\u041a\u043e\u043b-\u0432\u043e', value: 'amount' }, { text: '\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f', value: 'actions', sortable: false } ], editedIndex: -1, editedItem: { material: 0, req: 0, total_cost: 0, amount: 0 }, defaultItem: { material: 0, req: 0, total_cost: 0, amount: 0 } }), computed: { chosenmaterialsForm () { return this.editedIndex === -1 ? '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b' : '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u0445' } }, watch: { dialog (val) { val || this.close() }, dialogDelete (val) { val || this.closeDelete() } }, created () { this.GetChosenMaterials() this.GetMaterials() this.GetRequests() }, methods: { async GetChosenMaterials () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/chosenmaterials/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.chosenmaterials = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async GetMaterials () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/materialspl/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.materials = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async GetRequests () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/request/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.requests = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async CreateChosenMaterials () { try { const response = await this.axios .post('http://127.0.0.1:8000/ad_agency/chosenmaterials/create/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 201) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async UpdateChosenMaterials () { this.editedIndex = 1 try { const response = await this.axios .put('http://127.0.0.1:8000/ad_agency/chosenmaterials/' + this.editedItem.id + '/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async DeleteChosenMaterials () { this.editedIndex = 1 this.dialogDelete = true try { const response = await this.axios .delete('http://127.0.0.1:8000/ad_agency/chosenmaterials/' + this.editedItem.id + '/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 204) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, editItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.editedItem.req = parseInt(this.editedItem.req.split('-')[0]) this.editedItem.material = this.materials.find(item => item.title === this.editedItem.material).id this.dialog = true }, deleteItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialogDelete = true }, close () { this.dialog = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, closeDelete () { this.dialogDelete = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, save () { if (this.editedIndex > -1) { this.UpdateChosenMaterials() } else { this.CreateChosenMaterials() } this.close() } } } </script> ChosenServicesTableCard.vue <template> <v-data-table :headers=\"headers\" :items=\"chosenservices\" class=\"elevation-1\" > <template v-slot:top> <v-toolbar flat > <v-toolbar-title>\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438</v-toolbar-title> <v-divider class=\"mx-4\" inset vertical ></v-divider> <v-spacer></v-spacer> <v-dialog v-model=\"dialog\" max-width=\"500px\" > <template v-slot:activator=\"{ on, attrs }\"> <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\" > \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 </v-btn> </template> <v-card> <v-card-title> <span class=\"headline\">{{ chosenservicesForm }}</span> </v-card-title> <v-card-text> <v-container> <v-row> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-select :items=services item-text=\"title\" item-value=\"id\" label=\"\u0423\u0441\u043b\u0443\u0433\u0430\" v-model=\"editedItem.service\" :rules=\"rules.requireds\" ></v-select> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-select :items=requests item-text=\"id\" item-value=\"id\" label=\"\u0417\u0430\u044f\u0432\u043a\u0430\" v-model=\"editedItem.req\" :rules=\"rules.requireds\" ></v-select> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.total_cost\" label=\"\u0426\u0435\u043d\u0430\" :rules=\"[rules.required, rules.counter30]\" type=\"number\" ></v-text-field> </v-col> </v-row> </v-container> </v-card-text> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"close\" > \u041e\u0442\u043c\u0435\u043d\u0430 </v-btn> <v-btn color=\"blue darken-1\" text @click=\"save\" > \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c </v-btn> </v-card-actions> </v-card> </v-dialog> <v-dialog v-model=\"dialogDelete\" max-width=\"500px\"> <v-card> <v-card-title class=\"headline\">\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u0443\u0433\u0430\u0445?</v-card-title> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">\u041e\u0442\u043c\u0435\u043d\u0430</v-btn> <v-btn color=\"blue darken-1\" text @click=\"DeleteChosenServices\">\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c</v-btn> <v-spacer></v-spacer> </v-card-actions> </v-card> </v-dialog> </v-toolbar> </template> <template v-slot:[`item.actions`]=\"{ item }\"> <v-icon small class=\"mr-2\" @click=\"editItem(item)\" > mdi-pencil </v-icon> <v-icon small @click=\"deleteItem(item)\" > mdi-delete </v-icon> </template> </v-data-table> </template> <script> export default { data: () => ({ chosenservices: [], services: [], requests: [], rules: { required: value => !!value || 'Required.', requireds: [(value) => value.length > 0 || 'Required.'], counter30: value => value.length <= 30 || 'Max 30 characters' }, dialog: false, dialogDelete: false, headers: [ { text: 'ID', value: 'id' }, { text: '\u0423\u0441\u043b\u0443\u0433\u0430', value: 'service' }, { text: '\u0417\u0430\u044f\u0432\u043a\u0430', value: 'req' }, { text: '\u0426\u0435\u043d\u0430', value: 'total_cost' }, { text: '\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f', value: 'actions', sortable: false } ], editedIndex: -1, editedItem: { service: 0, req: 0, total_cost: 0 }, defaultItem: { service: 0, req: 0, total_cost: 0 } }), computed: { chosenservicesForm () { return this.editedIndex === -1 ? '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438' : '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u0443\u0433\u0430\u0445' } }, watch: { dialog (val) { val || this.close() }, dialogDelete (val) { val || this.closeDelete() } }, created () { this.GetChosenServices() this.GetServices() this.GetRequests() }, methods: { async GetChosenServices () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/chosenservices/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.chosenservices = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async GetServices () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/servicespl/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.services = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async GetRequests () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/request/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.requests = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async CreateChosenServices () { try { const response = await this.axios .post('http://127.0.0.1:8000/ad_agency/chosenservices/create/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 201) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async UpdateChosenServices () { this.editedIndex = 1 try { const response = await this.axios .put('http://127.0.0.1:8000/ad_agency/chosenservices/' + this.editedItem.id + '/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async DeleteChosenServices () { this.editedIndex = 1 this.dialogDelete = true try { const response = await this.axios .delete('http://127.0.0.1:8000/ad_agency/chosenservices/' + this.editedItem.id + '/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 204) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, editItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.editedItem.req = parseInt(this.editedItem.req.split('-')[0]) this.editedItem.service = this.services.find(item => item.title === this.editedItem.service).id this.dialog = true }, deleteItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialogDelete = true }, close () { this.dialog = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, closeDelete () { this.dialogDelete = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, save () { if (this.editedIndex > -1) { this.UpdateChosenServices() } else { this.CreateChosenServices() } this.close() } } } </script> ClientTableCard.vue: <template> <v-data-table :headers=\"headers\" :items=\"chosenservices\" class=\"elevation-1\" > <template v-slot:top> <v-toolbar flat > <v-toolbar-title>\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438</v-toolbar-title> <v-divider class=\"mx-4\" inset vertical ></v-divider> <v-spacer></v-spacer> <v-dialog v-model=\"dialog\" max-width=\"500px\" > <template v-slot:activator=\"{ on, attrs }\"> <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\" > \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 </v-btn> </template> <v-card> <v-card-title> <span class=\"headline\">{{ chosenservicesForm }}</span> </v-card-title> <v-card-text> <v-container> <v-row> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-select :items=services item-text=\"title\" item-value=\"id\" label=\"\u0423\u0441\u043b\u0443\u0433\u0430\" v-model=\"editedItem.service\" :rules=\"rules.requireds\" ></v-select> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-select :items=requests item-text=\"id\" item-value=\"id\" label=\"\u0417\u0430\u044f\u0432\u043a\u0430\" v-model=\"editedItem.req\" :rules=\"rules.requireds\" ></v-select> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.total_cost\" label=\"\u0426\u0435\u043d\u0430\" :rules=\"[rules.required, rules.counter30]\" type=\"number\" ></v-text-field> </v-col> </v-row> </v-container> </v-card-text> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"close\" > \u041e\u0442\u043c\u0435\u043d\u0430 </v-btn> <v-btn color=\"blue darken-1\" text @click=\"save\" > \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c </v-btn> </v-card-actions> </v-card> </v-dialog> <v-dialog v-model=\"dialogDelete\" max-width=\"500px\"> <v-card> <v-card-title class=\"headline\">\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u0443\u0433\u0430\u0445?</v-card-title> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">\u041e\u0442\u043c\u0435\u043d\u0430</v-btn> <v-btn color=\"blue darken-1\" text @click=\"DeleteChosenServices\">\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c</v-btn> <v-spacer></v-spacer> </v-card-actions> </v-card> </v-dialog> </v-toolbar> </template> <template v-slot:[`item.actions`]=\"{ item }\"> <v-icon small class=\"mr-2\" @click=\"editItem(item)\" > mdi-pencil </v-icon> <v-icon small @click=\"deleteItem(item)\" > mdi-delete </v-icon> </template> </v-data-table> </template> <script> export default { data: () => ({ chosenservices: [], services: [], requests: [], rules: { required: value => !!value || 'Required.', requireds: [(value) => value.length > 0 || 'Required.'], counter30: value => value.length <= 30 || 'Max 30 characters' }, dialog: false, dialogDelete: false, headers: [ { text: 'ID', value: 'id' }, { text: '\u0423\u0441\u043b\u0443\u0433\u0430', value: 'service' }, { text: '\u0417\u0430\u044f\u0432\u043a\u0430', value: 'req' }, { text: '\u0426\u0435\u043d\u0430', value: 'total_cost' }, { text: '\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f', value: 'actions', sortable: false } ], editedIndex: -1, editedItem: { service: 0, req: 0, total_cost: 0 }, defaultItem: { service: 0, req: 0, total_cost: 0 } }), computed: { chosenservicesForm () { return this.editedIndex === -1 ? '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438' : '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u0443\u0433\u0430\u0445' } }, watch: { dialog (val) { val || this.close() }, dialogDelete (val) { val || this.closeDelete() } }, created () { this.GetChosenServices() this.GetServices() this.GetRequests() }, methods: { async GetChosenServices () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/chosenservices/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.chosenservices = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async GetServices () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/servicespl/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.services = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async GetRequests () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/request/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.requests = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async CreateChosenServices () { try { const response = await this.axios .post('http://127.0.0.1:8000/ad_agency/chosenservices/create/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 201) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async UpdateChosenServices () { this.editedIndex = 1 try { const response = await this.axios .put('http://127.0.0.1:8000/ad_agency/chosenservices/' + this.editedItem.id + '/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async DeleteChosenServices () { this.editedIndex = 1 this.dialogDelete = true try { const response = await this.axios .delete('http://127.0.0.1:8000/ad_agency/chosenservices/' + this.editedItem.id + '/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 204) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, editItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.editedItem.req = parseInt(this.editedItem.req.split('-')[0]) this.editedItem.service = this.services.find(item => item.title === this.editedItem.service).id this.dialog = true }, deleteItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialogDelete = true }, close () { this.dialog = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, closeDelete () { this.dialogDelete = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, save () { if (this.editedIndex > -1) { this.UpdateChosenServices() } else { this.CreateChosenServices() } this.close() } } } </script> ExecutorTableCard.vue <template> <v-data-table :headers=\"headers\" :items=\"executors\" class=\"elevation-1\" > <template v-slot:top> <v-toolbar flat > <v-toolbar-title>\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0438</v-toolbar-title> <v-divider class=\"mx-4\" inset vertical ></v-divider> <v-spacer></v-spacer> <v-dialog v-model=\"dialog\" max-width=\"500px\" > <template v-slot:activator=\"{ on, attrs }\"> <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\" > \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f </v-btn> </template> <v-card> <v-card-title> <span class=\"headline\">{{ executorForm }}</span> </v-card-title> <v-card-text> <v-container> <v-row> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.full_name\" label=\"\u0424\u0418\u041e\" :rules=\"[rules.required, rules.counter50]\" ></v-text-field> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.phone_num\" label=\"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\" type=\"number\" :rules=\"[rules.required, rules.counter12]\" ></v-text-field> </v-col> </v-row> </v-container> </v-card-text> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"close\" > \u041e\u0442\u043c\u0435\u043d\u0430 </v-btn> <v-btn color=\"blue darken-1\" text @click=\"save\" > \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c </v-btn> </v-card-actions> </v-card> </v-dialog> <v-dialog v-model=\"dialogDelete\" max-width=\"500px\"> <v-card> <v-card-title class=\"headline\">\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f?</v-card-title> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">\u041e\u0442\u043c\u0435\u043d\u0430</v-btn> <v-btn color=\"blue darken-1\" text @click=\"DeleteExecutor\">\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c</v-btn> <v-spacer></v-spacer> </v-card-actions> </v-card> </v-dialog> </v-toolbar> </template> <template v-slot:[`item.actions`]=\"{ item }\"> <v-icon small class=\"mr-2\" @click=\"editItem(item)\" > mdi-pencil </v-icon> <v-icon small @click=\"deleteItem(item)\" > mdi-delete </v-icon> </template> </v-data-table> </template> <script> export default { data: () => ({ executors: [], rules: { required: value => !!value || 'Required.', counter12: value => value.length <= 12 || 'Max 12 characters', counter50: value => value.length <= 50 || 'Max 50 characters' }, dialog: false, dialogDelete: false, headers: [ { text: 'ID', value: 'id' }, { text: '\u0424\u0418\u041e', value: 'full_name' }, { text: '\u0422\u0435\u043b\u0435\u0444\u043e\u043d', value: 'phone_num' }, { text: '\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f', value: 'actions', sortable: false } ], editedIndex: -1, editedItem: { full_name: '', phone_num: '' }, defaultItem: { full_name: '', phone_num: '' } }), computed: { executorForm () { return this.editedIndex === -1 ? '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f' : '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u0431 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435' } }, watch: { dialog (val) { val || this.close() }, dialogDelete (val) { val || this.closeDelete() } }, created () { this.GetExecutors() }, methods: { async GetExecutors () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/executor/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.executors = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async CreateExecutor () { try { const response = await this.axios .post('http://127.0.0.1:8000/ad_agency/executor/create/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 201) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async UpdateExecutor () { this.editedIndex = 1 try { const response = await this.axios .put('http://127.0.0.1:8000/ad_agency/executor/' + this.editedItem.id + '/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async DeleteExecutor () { this.editedIndex = 1 this.dialogDelete = true try { const response = await this.axios .delete('http://127.0.0.1:8000/ad_agency/executor/' + this.editedItem.id + '/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 204) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, editItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialog = true }, deleteItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialogDelete = true }, close () { this.dialog = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, closeDelete () { this.dialogDelete = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, save () { if (this.editedIndex > -1) { this.UpdateExecutor() } else { this.CreateExecutor() } this.close() } } } </script> InvoiceTableCard.vue import socket from threading import Thread class Client: def __init__(self, port): self._socket = socket.socket(family=socket.AF_INET, type=socket.SOCK_STREAM, proto=0) self._socket.connect(('127.0.0.1', port)) def get(self): while True: try: data = self._socket.recv(1024) print(data.decode('utf-8')) except OSError: exit() def send(self): while True: message = input() if message == '\u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c': self._socket.send(bytes(f'{message}', 'utf-8')) self._socket.close() break self._socket.send(bytes(f'{message}', 'utf-8')) if __name__ == '__main__': clint = Client(53330) th_1, th_2 = Thread(target=clint.send), Thread(target=clint.get) th_1.start(), th_2.start() MaterialsPLTableCard.vue <template> <v-data-table :headers=\"headers\" :items=\"materials\" class=\"elevation-1\" > <template v-slot:top> <v-toolbar flat > <v-toolbar-title>\u041f\u0440\u0430\u0439\u0441-\u043b\u0438\u0441\u0442 \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b</v-toolbar-title> <v-divider class=\"mx-4\" inset vertical ></v-divider> <v-spacer></v-spacer> <v-dialog v-model=\"dialog\" max-width=\"500px\" > <template v-slot:activator=\"{ on, attrs }\"> <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\" > \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b </v-btn> </template> <v-card> <v-card-title> <span class=\"headline\">{{ materialForm }}</span> </v-card-title> <v-card-text> <v-container> <v-row> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.title\" label=\"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\" :rules=\"[rules.required, rules.counter50]\" ></v-text-field> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.description\" label=\"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\" :rules=\"[rules.required, rules.counter150]\" ></v-text-field> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.price\" label=\"\u0426\u0435\u043d\u0430\" :rules=\"[rules.required, rules.counter30]\" type=\"number\" ></v-text-field> </v-col> </v-row> </v-container> </v-card-text> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"close\" > \u041e\u0442\u043c\u0435\u043d\u0430 </v-btn> <v-btn color=\"blue darken-1\" text @click=\"save\" > \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c </v-btn> </v-card-actions> </v-card> </v-dialog> <v-dialog v-model=\"dialogDelete\" max-width=\"500px\"> <v-card> <v-card-title class=\"headline\">\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b?</v-card-title> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">\u041e\u0442\u043c\u0435\u043d\u0430</v-btn> <v-btn color=\"blue darken-1\" text @click=\"DeleteMaterial\">\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c</v-btn> <v-spacer></v-spacer> </v-card-actions> </v-card> </v-dialog> </v-toolbar> </template> <template v-slot:[`item.actions`]=\"{ item }\"> <v-icon small class=\"mr-2\" @click=\"editItem(item)\" > mdi-pencil </v-icon> <v-icon small @click=\"deleteItem(item)\" > mdi-delete </v-icon> </template> </v-data-table> </template> <script> export default { data: () => ({ materials: [], rules: { required: value => !!value || 'Required.', counter30: value => value.length <= 30 || 'Max 30 characters', counter50: value => value.length <= 50 || 'Max 50 characters', counter150: value => value.length <= 150 || 'Max 150 characters' }, dialog: false, dialogDelete: false, headers: [ { text: 'ID', value: 'id' }, { text: '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435', value: 'title' }, { text: '\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435', value: 'description' }, { text: '\u0426\u0435\u043d\u0430', value: 'price' }, { text: '\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f', value: 'actions', sortable: false } ], editedIndex: -1, editedItem: { title: '', description: '', price: 0 }, defaultItem: { title: '', description: '', price: 0 } }), computed: { materialForm () { return this.editedIndex === -1 ? '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b' : '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0435' } }, watch: { dialog (val) { val || this.close() }, dialogDelete (val) { val || this.closeDelete() } }, created () { this.GetMaterials() }, methods: { async GetMaterials () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/materialspl/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.materials = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async CreateMaterial () { try { const response = await this.axios .post('http://127.0.0.1:8000/ad_agency/materialspl/create/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 201) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async UpdateMaterial () { this.editedIndex = 1 try { const response = await this.axios .put('http://127.0.0.1:8000/ad_agency/materialspl/' + this.editedItem.id + '/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async DeleteMaterial () { this.editedIndex = 1 this.dialogDelete = true try { const response = await this.axios .delete('http://127.0.0.1:8000/ad_agency/materialspl/' + this.editedItem.id + '/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 204) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, editItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialog = true }, deleteItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialogDelete = true }, close () { this.dialog = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, closeDelete () { this.dialogDelete = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, save () { if (this.editedIndex > -1) { this.UpdateMaterial() } else { this.CreateMaterial() } this.close() } } } </script>","title":"\u041b\u0430\u0431\u0430 \u21164"},{"location":"lab4/#no4-33421","text":"","title":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u21164. \u0415\u0432\u0434\u043e\u043a\u0438\u043c\u043e\u0432 \u0412\u043b\u0430\u0434\u0438\u0441\u043b\u0430\u0432 \u041a33421"},{"location":"lab4/#_1","text":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0444\u0440\u043e\u043d\u0442\u0435\u043d\u0434\u0430 \u0426\u0435\u043b\u044c: \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0433\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0430\u0439\u0442\u0430 (\u0444\u0440\u043e\u043d\u0442\u0435\u043d\u0434\u0430) \u0441 \u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0446\u0438\u0435\u0439 \u0441 \u0431\u044d\u043a\u044d\u043d\u0434\u043e\u043c \u043f\u043e API.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},{"location":"lab4/#appvue","text":"<template> <v-app> <v-app-bar app color=\"gray\" dark > <div class=\"d-flex align-center\"> <h1 class=\"headline\">\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u043e\u0435 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u043e </h1> </div> <v-spacer></v-spacer> <v-btn v-if='auth' icon @click='AccountDetails'> <v-icon>mdi-account</v-icon> </v-btn> <div class=\"mx-2\"></div> <v-btn icon @click='goHome'> <v-icon>mdi-home</v-icon> </v-btn> <div class=\"mx-2\"></div> <v-btn icon> <v-icon v-if='!auth' @click='login' >mdi-login-variant</v-icon> <v-icon v-if='auth' @click='logout' >mdi-logout-variant</v-icon> </v-btn> </v-app-bar> <v-main class=\"d-flex align-center text-center\"> <router-view /> </v-main> </v-app> </template> <script> import $ from 'jquery' export default { name: 'App', created () { if (localStorage.getItem('token')) { $.ajaxSetup({ headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) } }, computed: { auth () { return !!localStorage.getItem('token'); } }, methods: { login () { this.$router.push({ name: 'signin' }) }, logout () { localStorage.removeItem('token') window.location = '/' }, goHome () { this.$router.push({ name: 'about' }) }, AccountDetails () { this.$router.push({ name: 'accountdetails' }) } }, data: () => ({ // }) } </script>","title":"App.vue:"},{"location":"lab4/#signupvue","text":"<template> <div class=\"signup\"> <v-form @submit.prevent=\"signUp\" ref=\"signUpForm\" class=\"my-2\" > <v-row> <v-col cols=\"3\" class=\"mx-auto\"> <v-text-field label=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f\" v-model=\"signUpForm.first_name\" :rules=\"rules.required\" /> <v-text-field label=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e\" v-model=\"signUpForm.last_name\" :rules=\"rules.required\" /> <v-select :items=\"roles\" label=\"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u044c\" v-model=\"signUpForm.role\" :rules=\"rules.required\" ></v-select> <v-text-field label=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\" v-model=\"signUpForm.tel\" :rules=\"rules.required\" /> <v-text-field label=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email\" v-model=\"signUpForm.email\" :rules=\"rules.required\" /> <v-text-field label=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\" v-model=\"signUpForm.username\" :rules=\"rules.required\" /> <v-text-field label=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c\" v-model=\"signUpForm.password\" type=\"password\" :rules=\"[rules.required, rules.counter9]\" /> <v-btn type=\"submit\" color=\"primary\" dark>\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f</v-btn> <p class=\"mt-5\">\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? <router-link to=\"/signin\">\u0412\u043e\u0439\u0442\u0438</router-link></p> </v-col> </v-row> </v-form> </div> </template> <script> export default { name: 'SignUp', data: () => ({ signUpForm: { first_name: '', last_name: '', role: '', tel: '', email: '', username: '', password: '' }, roles: ['\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440', '\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440', '\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440'], rules: { required: value => !!value || 'Required.', counter9: value => value.length <= 9 || 'Min 9 characters' } }), methods: { async signUp () { if (this.signUpForm.role === '\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440') { this.signUpForm.role = '\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440' } else if (this.signUpForm.role === '\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440') { this.signUpForm.role = '\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440' } else if (this.signUpForm.role === '\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440') { this.signUpForm.role = '\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440' } try { const response = await this.axios .post('http://127.0.0.1:8000/auth/users/', this.signUpForm) if (response.status !== 201) { throw new Error(response.status) } this.$refs.signUpForm.reset() await this.$router.push({ name: 'signin' }) } catch (e) { console.error('AN API ERROR', e) } } } } </script>","title":"SignUp.vue"},{"location":"lab4/#loginvue","text":"<template> <div> <input v-model=\"login\" type=\"text\" placeholder=\"\u041b\u043e\u0433\u0438\u043d\"/> <input v-model=\"password\" type=\"password\" placeholder=\"\u041f\u0430\u0440\u043e\u043b\u044c\"/> <button @click=\"setLogin\">\u0412\u043e\u0439\u0442\u0438</button> </div> </template> <script> import $ from 'jquery' export default { name: 'Login', data () { return { login: '', password: '' } }, methods: { setLogin () { $.ajax({ url: 'http://127.0.0.1:8000/auth/token/login/', type: 'POST', data: { username: this.login, password: this.password }, success: (response) => { alert('\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0447\u0442\u043e \u0412\u044b \u0441 \u043d\u0430\u043c\u0438') sessionStorage.setItem('auth_token', response.data.attributes.auth_token) this.$router.push({ name: 'home' }) }, error: (response) => { if (response.status === 400) { alert('\u041b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0432\u0435\u0440\u0435\u043d') } } }) } } } </script> <style scoped> </style>","title":"LogIn.vue:"},{"location":"lab4/#accountdetailvue","text":"<template> <v-container> <v-row> <v-col cols=\"2\"> <v-card> <nav-drawer/> </v-card> </v-col> <v-col cols=\"10\"> <AccountDetailsCard/> </v-col> </v-row> </v-container> </template> <script> import NavDrawer from '@/components/NavDrawer' import AccountDetailsCard from '@/components/AccountDetailsCard' export default { name: 'AccountDetails', components: { NavDrawer, AccountDetailsCard } } </script>","title":"AccountDetail.vue"},{"location":"lab4/#aboutvue","text":"<template> <v-container> <v-row> <v-col cols=\"2\"> <v-card> <nav-drawer v-if='auth'/> </v-card> </v-col> <v-col cols=\"10\"> <v-card> <h3>\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0443\u0447\u0451\u0442\u0430 \"\u041b\u0443\u0447-\u0430\u0433\u0435\u043d\u0441\u0442\u0432\u043e\"</h3> </v-card> </v-col> </v-row> </v-container> </template> <script> import NavDrawer from '@/components/NavDrawer' export default { name: 'About', components: { NavDrawer }, computed: { auth () { return !!localStorage.getItem('token'); } } } </script> <style scoped> </style>","title":"About.vue"},{"location":"lab4/#navdrawervue","text":"<template> <v-card> <v-navigation-drawer floating permanent width=\"320\" > <v-list dense rounded > <v-list-item v-for=\"item in items\" :key=\"item.title\" @click=item.link > <v-list-item-icon> <v-icon>{{ item.icon }}</v-icon> </v-list-item-icon> <v-list-item-content> <v-list-item-title>{{ item.title }}</v-list-item-title> </v-list-item-content> </v-list-item> </v-list> </v-navigation-drawer> </v-card> </template> <script> export default { name: 'NavDrawer', data () { return { items: [ { title: '\u041a\u043b\u0438\u0435\u043d\u0442\u044b', icon: 'mdi-account', link: this.client }, { title: '\u041f\u0440\u0430\u0439\u0441-\u043b\u0438\u0441\u0442 \u043d\u0430 \u0443\u0441\u043b\u0443\u0433\u0438', icon: 'mdi-format-list-bulleted', link: this.servicePL }, { title: '\u041f\u0440\u0430\u0439\u0441-\u043b\u0438\u0441\u0442 \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b', icon: 'mdi-format-list-bulleted', link: this.materialsPL }, { title: '\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0438', icon: 'mdi-account-tie', link: this.executor }, { title: '\u0417\u0430\u044f\u0432\u043a\u0438', icon: 'mdi-account-question', link: this.request }, { title: '\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438', icon: 'mdi-cart-arrow-down', link: this.chosenServices }, { title: '\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b', icon: 'mdi-cart-arrow-down', link: this.chosenMaterials }, { title: '\u0420\u0430\u0431\u043e\u0447\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b', icon: 'mdi-account-group', link: this.workGroup }, { title: '\u0421\u0447\u0435\u0442\u0430 \u043d\u0430 \u043e\u043f\u043b\u0430\u0442\u0443', icon: 'mdi-cash', link: this.invoice }, { title: '\u041f\u043b\u0430\u0442\u0435\u0436\u043d\u044b\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f', icon: 'mdi-cash-check', link: this.paymentOrder } ] } }, methods: { client () { this.$router.push({ name: 'client' }) }, servicePL () { this.$router.push({ name: 'servicepl' }) }, materialsPL () { this.$router.push({ name: 'materialspl' }) }, executor () { this.$router.push({ name: 'executor' }) }, request () { this.$router.push({ name: 'request' }) }, chosenServices () { this.$router.push({ name: 'chosenservices' }) }, chosenMaterials () { this.$router.push({ name: 'chosenmaterials' }) }, workGroup () { this.$router.push({ name: 'workgroup' }) }, invoice () { this.$router.push({ name: 'invoice' }) }, paymentOrder () { this.$router.push({ name: 'paymentorder' }) } } } </script> <style scoped> </style>","title":"NavDrawer.vue:"},{"location":"lab4/#accountdetailscardvue","text":"<template> <v-container> <v-row> <h1>\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \"{{ EditedItem.username }}\"</h1> <p></p> </v-row> <v-row> <v-text-field v-model=\"EditedItem.first_name\" label=\"\u0418\u043c\u044f\" required ></v-text-field> </v-row> <v-row> <v-text-field v-model=\"EditedItem.last_name\" label=\"\u0424\u0430\u043c\u0438\u043b\u0438\u044f\" required ></v-text-field> </v-row> <v-row> <v-text-field v-model=\"EditedItem.tel\" label=\"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\" required ></v-text-field> </v-row> <v-row> <v-text-field v-model=\"EditedItem.role\" label=\"\u0420\u043e\u043b\u044c\" required ></v-text-field> </v-row> <v-btn color=\"anchor\" class=\"mr-4\" @click=\"reset\" > \u041e\u0442\u043c\u0435\u043d\u0430 </v-btn> <v-btn color=\"primary\" class=\"mr-4\" @click=\"ChangeAccountDetails\" > \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f </v-btn> </v-container> </template> <script> export default { data: () => ({ AccountDetails: [], EditedItem: [], data: {} }), created () { this.GetAccountDetails() }, methods: { async GetAccountDetails () { try { const response = await this.axios .get('http://127.0.0.1:8000/auth/users/me/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.AccountDetails = response.data this.EditedItem = response.data } catch (e) { console.error('AN API ERROR', e) } }, async ChangeAccountDetails () { try { const response = await this.axios .patch('http://127.0.0.1:8000/auth/users/me/', JSON.stringify(this.EditedItem), { headers: { Authorization: 'Token ' + localStorage.getItem('token'), 'Content-Type': 'application/json' } }) if (response.status !== 200) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, reset () { this.EditedItem = this.AccountDetails window.location.reload() } } } </script>","title":"AccountDetailsCard.vue"},{"location":"lab4/#chosenmaterialstablecardvue","text":"<template> <v-data-table :headers=\"headers\" :items=\"chosenmaterials\" class=\"elevation-1\" > <template v-slot:top> <v-toolbar flat > <v-toolbar-title>\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b</v-toolbar-title> <v-divider class=\"mx-4\" inset vertical ></v-divider> <v-spacer></v-spacer> <v-dialog v-model=\"dialog\" max-width=\"500px\" > <template v-slot:activator=\"{ on, attrs }\"> <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\" > \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b </v-btn> </template> <v-card> <v-card-title> <span class=\"headline\">{{ chosenmaterialsForm }}</span> </v-card-title> <v-card-text> <v-container> <v-row> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-select :items=materials item-text=\"title\" item-value=\"id\" label=\"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\" v-model=\"editedItem.material\" :rules=\"rules.requireds\" ></v-select> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-select :items=requests item-text=\"id\" item-value=\"editedItem.req\" label=\"\u0417\u0430\u044f\u0432\u043a\u0430\" v-model=\"editedItem.req\" :rules=\"rules.requireds\" ></v-select> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.total_cost\" label=\"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c\" type=\"number\" :rules=\"[rules.required, rules.counter30]\" ></v-text-field> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.amount\" label=\"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\" :rules=\"rules.required\" type=\"number\" ></v-text-field> </v-col> </v-row> </v-container> </v-card-text> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"close\" > \u041e\u0442\u043c\u0435\u043d\u0430 </v-btn> <v-btn color=\"blue darken-1\" text @click=\"save\" > \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c </v-btn> </v-card-actions> </v-card> </v-dialog> <v-dialog v-model=\"dialogDelete\" max-width=\"500px\"> <v-card> <v-card-title class=\"headline\">\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u0445?</v-card-title> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">\u041e\u0442\u043c\u0435\u043d\u0430</v-btn> <v-btn color=\"blue darken-1\" text @click=\"DeleteChosenMaterials\">\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c</v-btn> <v-spacer></v-spacer> </v-card-actions> </v-card> </v-dialog> </v-toolbar> </template> <template v-slot:[`item.actions`]=\"{ item }\"> <v-icon small class=\"mr-2\" @click=\"editItem(item)\" > mdi-pencil </v-icon> <v-icon small @click=\"deleteItem(item)\" > mdi-delete </v-icon> </template> </v-data-table> </template> <script> export default { data: () => ({ chosenmaterials: [], materials: [], requests: [], rules: { required: value => !!value || 'Required.', requireds: [(value) => value.length > 0 || 'Required.'], counter30: value => value.length <= 30 || 'Max 30 characters' }, dialog: false, dialogDelete: false, headers: [ { text: 'ID', value: 'id' }, { text: '\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b', value: 'material' }, { text: '\u0417\u0430\u044f\u0432\u043a\u0430', value: 'req' }, { text: '\u0426\u0435\u043d\u0430', value: 'total_cost' }, { text: '\u041a\u043e\u043b-\u0432\u043e', value: 'amount' }, { text: '\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f', value: 'actions', sortable: false } ], editedIndex: -1, editedItem: { material: 0, req: 0, total_cost: 0, amount: 0 }, defaultItem: { material: 0, req: 0, total_cost: 0, amount: 0 } }), computed: { chosenmaterialsForm () { return this.editedIndex === -1 ? '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b' : '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u0445' } }, watch: { dialog (val) { val || this.close() }, dialogDelete (val) { val || this.closeDelete() } }, created () { this.GetChosenMaterials() this.GetMaterials() this.GetRequests() }, methods: { async GetChosenMaterials () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/chosenmaterials/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.chosenmaterials = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async GetMaterials () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/materialspl/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.materials = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async GetRequests () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/request/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.requests = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async CreateChosenMaterials () { try { const response = await this.axios .post('http://127.0.0.1:8000/ad_agency/chosenmaterials/create/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 201) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async UpdateChosenMaterials () { this.editedIndex = 1 try { const response = await this.axios .put('http://127.0.0.1:8000/ad_agency/chosenmaterials/' + this.editedItem.id + '/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async DeleteChosenMaterials () { this.editedIndex = 1 this.dialogDelete = true try { const response = await this.axios .delete('http://127.0.0.1:8000/ad_agency/chosenmaterials/' + this.editedItem.id + '/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 204) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, editItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.editedItem.req = parseInt(this.editedItem.req.split('-')[0]) this.editedItem.material = this.materials.find(item => item.title === this.editedItem.material).id this.dialog = true }, deleteItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialogDelete = true }, close () { this.dialog = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, closeDelete () { this.dialogDelete = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, save () { if (this.editedIndex > -1) { this.UpdateChosenMaterials() } else { this.CreateChosenMaterials() } this.close() } } } </script>","title":"ChosenMaterialsTableCard.vue"},{"location":"lab4/#chosenservicestablecardvue","text":"<template> <v-data-table :headers=\"headers\" :items=\"chosenservices\" class=\"elevation-1\" > <template v-slot:top> <v-toolbar flat > <v-toolbar-title>\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438</v-toolbar-title> <v-divider class=\"mx-4\" inset vertical ></v-divider> <v-spacer></v-spacer> <v-dialog v-model=\"dialog\" max-width=\"500px\" > <template v-slot:activator=\"{ on, attrs }\"> <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\" > \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 </v-btn> </template> <v-card> <v-card-title> <span class=\"headline\">{{ chosenservicesForm }}</span> </v-card-title> <v-card-text> <v-container> <v-row> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-select :items=services item-text=\"title\" item-value=\"id\" label=\"\u0423\u0441\u043b\u0443\u0433\u0430\" v-model=\"editedItem.service\" :rules=\"rules.requireds\" ></v-select> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-select :items=requests item-text=\"id\" item-value=\"id\" label=\"\u0417\u0430\u044f\u0432\u043a\u0430\" v-model=\"editedItem.req\" :rules=\"rules.requireds\" ></v-select> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.total_cost\" label=\"\u0426\u0435\u043d\u0430\" :rules=\"[rules.required, rules.counter30]\" type=\"number\" ></v-text-field> </v-col> </v-row> </v-container> </v-card-text> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"close\" > \u041e\u0442\u043c\u0435\u043d\u0430 </v-btn> <v-btn color=\"blue darken-1\" text @click=\"save\" > \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c </v-btn> </v-card-actions> </v-card> </v-dialog> <v-dialog v-model=\"dialogDelete\" max-width=\"500px\"> <v-card> <v-card-title class=\"headline\">\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u0443\u0433\u0430\u0445?</v-card-title> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">\u041e\u0442\u043c\u0435\u043d\u0430</v-btn> <v-btn color=\"blue darken-1\" text @click=\"DeleteChosenServices\">\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c</v-btn> <v-spacer></v-spacer> </v-card-actions> </v-card> </v-dialog> </v-toolbar> </template> <template v-slot:[`item.actions`]=\"{ item }\"> <v-icon small class=\"mr-2\" @click=\"editItem(item)\" > mdi-pencil </v-icon> <v-icon small @click=\"deleteItem(item)\" > mdi-delete </v-icon> </template> </v-data-table> </template> <script> export default { data: () => ({ chosenservices: [], services: [], requests: [], rules: { required: value => !!value || 'Required.', requireds: [(value) => value.length > 0 || 'Required.'], counter30: value => value.length <= 30 || 'Max 30 characters' }, dialog: false, dialogDelete: false, headers: [ { text: 'ID', value: 'id' }, { text: '\u0423\u0441\u043b\u0443\u0433\u0430', value: 'service' }, { text: '\u0417\u0430\u044f\u0432\u043a\u0430', value: 'req' }, { text: '\u0426\u0435\u043d\u0430', value: 'total_cost' }, { text: '\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f', value: 'actions', sortable: false } ], editedIndex: -1, editedItem: { service: 0, req: 0, total_cost: 0 }, defaultItem: { service: 0, req: 0, total_cost: 0 } }), computed: { chosenservicesForm () { return this.editedIndex === -1 ? '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438' : '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u0443\u0433\u0430\u0445' } }, watch: { dialog (val) { val || this.close() }, dialogDelete (val) { val || this.closeDelete() } }, created () { this.GetChosenServices() this.GetServices() this.GetRequests() }, methods: { async GetChosenServices () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/chosenservices/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.chosenservices = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async GetServices () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/servicespl/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.services = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async GetRequests () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/request/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.requests = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async CreateChosenServices () { try { const response = await this.axios .post('http://127.0.0.1:8000/ad_agency/chosenservices/create/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 201) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async UpdateChosenServices () { this.editedIndex = 1 try { const response = await this.axios .put('http://127.0.0.1:8000/ad_agency/chosenservices/' + this.editedItem.id + '/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async DeleteChosenServices () { this.editedIndex = 1 this.dialogDelete = true try { const response = await this.axios .delete('http://127.0.0.1:8000/ad_agency/chosenservices/' + this.editedItem.id + '/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 204) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, editItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.editedItem.req = parseInt(this.editedItem.req.split('-')[0]) this.editedItem.service = this.services.find(item => item.title === this.editedItem.service).id this.dialog = true }, deleteItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialogDelete = true }, close () { this.dialog = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, closeDelete () { this.dialogDelete = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, save () { if (this.editedIndex > -1) { this.UpdateChosenServices() } else { this.CreateChosenServices() } this.close() } } } </script>","title":"ChosenServicesTableCard.vue"},{"location":"lab4/#clienttablecardvue","text":"<template> <v-data-table :headers=\"headers\" :items=\"chosenservices\" class=\"elevation-1\" > <template v-slot:top> <v-toolbar flat > <v-toolbar-title>\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438</v-toolbar-title> <v-divider class=\"mx-4\" inset vertical ></v-divider> <v-spacer></v-spacer> <v-dialog v-model=\"dialog\" max-width=\"500px\" > <template v-slot:activator=\"{ on, attrs }\"> <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\" > \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 </v-btn> </template> <v-card> <v-card-title> <span class=\"headline\">{{ chosenservicesForm }}</span> </v-card-title> <v-card-text> <v-container> <v-row> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-select :items=services item-text=\"title\" item-value=\"id\" label=\"\u0423\u0441\u043b\u0443\u0433\u0430\" v-model=\"editedItem.service\" :rules=\"rules.requireds\" ></v-select> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-select :items=requests item-text=\"id\" item-value=\"id\" label=\"\u0417\u0430\u044f\u0432\u043a\u0430\" v-model=\"editedItem.req\" :rules=\"rules.requireds\" ></v-select> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.total_cost\" label=\"\u0426\u0435\u043d\u0430\" :rules=\"[rules.required, rules.counter30]\" type=\"number\" ></v-text-field> </v-col> </v-row> </v-container> </v-card-text> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"close\" > \u041e\u0442\u043c\u0435\u043d\u0430 </v-btn> <v-btn color=\"blue darken-1\" text @click=\"save\" > \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c </v-btn> </v-card-actions> </v-card> </v-dialog> <v-dialog v-model=\"dialogDelete\" max-width=\"500px\"> <v-card> <v-card-title class=\"headline\">\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u0443\u0433\u0430\u0445?</v-card-title> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">\u041e\u0442\u043c\u0435\u043d\u0430</v-btn> <v-btn color=\"blue darken-1\" text @click=\"DeleteChosenServices\">\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c</v-btn> <v-spacer></v-spacer> </v-card-actions> </v-card> </v-dialog> </v-toolbar> </template> <template v-slot:[`item.actions`]=\"{ item }\"> <v-icon small class=\"mr-2\" @click=\"editItem(item)\" > mdi-pencil </v-icon> <v-icon small @click=\"deleteItem(item)\" > mdi-delete </v-icon> </template> </v-data-table> </template> <script> export default { data: () => ({ chosenservices: [], services: [], requests: [], rules: { required: value => !!value || 'Required.', requireds: [(value) => value.length > 0 || 'Required.'], counter30: value => value.length <= 30 || 'Max 30 characters' }, dialog: false, dialogDelete: false, headers: [ { text: 'ID', value: 'id' }, { text: '\u0423\u0441\u043b\u0443\u0433\u0430', value: 'service' }, { text: '\u0417\u0430\u044f\u0432\u043a\u0430', value: 'req' }, { text: '\u0426\u0435\u043d\u0430', value: 'total_cost' }, { text: '\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f', value: 'actions', sortable: false } ], editedIndex: -1, editedItem: { service: 0, req: 0, total_cost: 0 }, defaultItem: { service: 0, req: 0, total_cost: 0 } }), computed: { chosenservicesForm () { return this.editedIndex === -1 ? '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438' : '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u0443\u0433\u0430\u0445' } }, watch: { dialog (val) { val || this.close() }, dialogDelete (val) { val || this.closeDelete() } }, created () { this.GetChosenServices() this.GetServices() this.GetRequests() }, methods: { async GetChosenServices () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/chosenservices/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.chosenservices = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async GetServices () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/servicespl/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.services = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async GetRequests () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/request/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.requests = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async CreateChosenServices () { try { const response = await this.axios .post('http://127.0.0.1:8000/ad_agency/chosenservices/create/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 201) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async UpdateChosenServices () { this.editedIndex = 1 try { const response = await this.axios .put('http://127.0.0.1:8000/ad_agency/chosenservices/' + this.editedItem.id + '/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async DeleteChosenServices () { this.editedIndex = 1 this.dialogDelete = true try { const response = await this.axios .delete('http://127.0.0.1:8000/ad_agency/chosenservices/' + this.editedItem.id + '/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 204) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, editItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.editedItem.req = parseInt(this.editedItem.req.split('-')[0]) this.editedItem.service = this.services.find(item => item.title === this.editedItem.service).id this.dialog = true }, deleteItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialogDelete = true }, close () { this.dialog = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, closeDelete () { this.dialogDelete = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, save () { if (this.editedIndex > -1) { this.UpdateChosenServices() } else { this.CreateChosenServices() } this.close() } } } </script>","title":"ClientTableCard.vue:"},{"location":"lab4/#executortablecardvue","text":"<template> <v-data-table :headers=\"headers\" :items=\"executors\" class=\"elevation-1\" > <template v-slot:top> <v-toolbar flat > <v-toolbar-title>\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0438</v-toolbar-title> <v-divider class=\"mx-4\" inset vertical ></v-divider> <v-spacer></v-spacer> <v-dialog v-model=\"dialog\" max-width=\"500px\" > <template v-slot:activator=\"{ on, attrs }\"> <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\" > \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f </v-btn> </template> <v-card> <v-card-title> <span class=\"headline\">{{ executorForm }}</span> </v-card-title> <v-card-text> <v-container> <v-row> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.full_name\" label=\"\u0424\u0418\u041e\" :rules=\"[rules.required, rules.counter50]\" ></v-text-field> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.phone_num\" label=\"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\" type=\"number\" :rules=\"[rules.required, rules.counter12]\" ></v-text-field> </v-col> </v-row> </v-container> </v-card-text> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"close\" > \u041e\u0442\u043c\u0435\u043d\u0430 </v-btn> <v-btn color=\"blue darken-1\" text @click=\"save\" > \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c </v-btn> </v-card-actions> </v-card> </v-dialog> <v-dialog v-model=\"dialogDelete\" max-width=\"500px\"> <v-card> <v-card-title class=\"headline\">\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f?</v-card-title> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">\u041e\u0442\u043c\u0435\u043d\u0430</v-btn> <v-btn color=\"blue darken-1\" text @click=\"DeleteExecutor\">\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c</v-btn> <v-spacer></v-spacer> </v-card-actions> </v-card> </v-dialog> </v-toolbar> </template> <template v-slot:[`item.actions`]=\"{ item }\"> <v-icon small class=\"mr-2\" @click=\"editItem(item)\" > mdi-pencil </v-icon> <v-icon small @click=\"deleteItem(item)\" > mdi-delete </v-icon> </template> </v-data-table> </template> <script> export default { data: () => ({ executors: [], rules: { required: value => !!value || 'Required.', counter12: value => value.length <= 12 || 'Max 12 characters', counter50: value => value.length <= 50 || 'Max 50 characters' }, dialog: false, dialogDelete: false, headers: [ { text: 'ID', value: 'id' }, { text: '\u0424\u0418\u041e', value: 'full_name' }, { text: '\u0422\u0435\u043b\u0435\u0444\u043e\u043d', value: 'phone_num' }, { text: '\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f', value: 'actions', sortable: false } ], editedIndex: -1, editedItem: { full_name: '', phone_num: '' }, defaultItem: { full_name: '', phone_num: '' } }), computed: { executorForm () { return this.editedIndex === -1 ? '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f' : '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u0431 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435' } }, watch: { dialog (val) { val || this.close() }, dialogDelete (val) { val || this.closeDelete() } }, created () { this.GetExecutors() }, methods: { async GetExecutors () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/executor/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.executors = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async CreateExecutor () { try { const response = await this.axios .post('http://127.0.0.1:8000/ad_agency/executor/create/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 201) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async UpdateExecutor () { this.editedIndex = 1 try { const response = await this.axios .put('http://127.0.0.1:8000/ad_agency/executor/' + this.editedItem.id + '/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async DeleteExecutor () { this.editedIndex = 1 this.dialogDelete = true try { const response = await this.axios .delete('http://127.0.0.1:8000/ad_agency/executor/' + this.editedItem.id + '/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 204) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, editItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialog = true }, deleteItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialogDelete = true }, close () { this.dialog = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, closeDelete () { this.dialogDelete = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, save () { if (this.editedIndex > -1) { this.UpdateExecutor() } else { this.CreateExecutor() } this.close() } } } </script>","title":"ExecutorTableCard.vue"},{"location":"lab4/#invoicetablecardvue","text":"import socket from threading import Thread class Client: def __init__(self, port): self._socket = socket.socket(family=socket.AF_INET, type=socket.SOCK_STREAM, proto=0) self._socket.connect(('127.0.0.1', port)) def get(self): while True: try: data = self._socket.recv(1024) print(data.decode('utf-8')) except OSError: exit() def send(self): while True: message = input() if message == '\u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c': self._socket.send(bytes(f'{message}', 'utf-8')) self._socket.close() break self._socket.send(bytes(f'{message}', 'utf-8')) if __name__ == '__main__': clint = Client(53330) th_1, th_2 = Thread(target=clint.send), Thread(target=clint.get) th_1.start(), th_2.start()","title":"InvoiceTableCard.vue"},{"location":"lab4/#materialspltablecardvue","text":"<template> <v-data-table :headers=\"headers\" :items=\"materials\" class=\"elevation-1\" > <template v-slot:top> <v-toolbar flat > <v-toolbar-title>\u041f\u0440\u0430\u0439\u0441-\u043b\u0438\u0441\u0442 \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b</v-toolbar-title> <v-divider class=\"mx-4\" inset vertical ></v-divider> <v-spacer></v-spacer> <v-dialog v-model=\"dialog\" max-width=\"500px\" > <template v-slot:activator=\"{ on, attrs }\"> <v-btn color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\" > \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b </v-btn> </template> <v-card> <v-card-title> <span class=\"headline\">{{ materialForm }}</span> </v-card-title> <v-card-text> <v-container> <v-row> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.title\" label=\"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\" :rules=\"[rules.required, rules.counter50]\" ></v-text-field> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.description\" label=\"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\" :rules=\"[rules.required, rules.counter150]\" ></v-text-field> </v-col> <v-col cols=\"12\" sm=\"6\" md=\"4\" > <v-text-field v-model=\"editedItem.price\" label=\"\u0426\u0435\u043d\u0430\" :rules=\"[rules.required, rules.counter30]\" type=\"number\" ></v-text-field> </v-col> </v-row> </v-container> </v-card-text> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"close\" > \u041e\u0442\u043c\u0435\u043d\u0430 </v-btn> <v-btn color=\"blue darken-1\" text @click=\"save\" > \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c </v-btn> </v-card-actions> </v-card> </v-dialog> <v-dialog v-model=\"dialogDelete\" max-width=\"500px\"> <v-card> <v-card-title class=\"headline\">\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b?</v-card-title> <v-card-actions> <v-spacer></v-spacer> <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">\u041e\u0442\u043c\u0435\u043d\u0430</v-btn> <v-btn color=\"blue darken-1\" text @click=\"DeleteMaterial\">\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c</v-btn> <v-spacer></v-spacer> </v-card-actions> </v-card> </v-dialog> </v-toolbar> </template> <template v-slot:[`item.actions`]=\"{ item }\"> <v-icon small class=\"mr-2\" @click=\"editItem(item)\" > mdi-pencil </v-icon> <v-icon small @click=\"deleteItem(item)\" > mdi-delete </v-icon> </template> </v-data-table> </template> <script> export default { data: () => ({ materials: [], rules: { required: value => !!value || 'Required.', counter30: value => value.length <= 30 || 'Max 30 characters', counter50: value => value.length <= 50 || 'Max 50 characters', counter150: value => value.length <= 150 || 'Max 150 characters' }, dialog: false, dialogDelete: false, headers: [ { text: 'ID', value: 'id' }, { text: '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435', value: 'title' }, { text: '\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435', value: 'description' }, { text: '\u0426\u0435\u043d\u0430', value: 'price' }, { text: '\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f', value: 'actions', sortable: false } ], editedIndex: -1, editedItem: { title: '', description: '', price: 0 }, defaultItem: { title: '', description: '', price: 0 } }), computed: { materialForm () { return this.editedIndex === -1 ? '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b' : '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0435' } }, watch: { dialog (val) { val || this.close() }, dialogDelete (val) { val || this.closeDelete() } }, created () { this.GetMaterials() }, methods: { async GetMaterials () { try { const response = await this.axios .get('http://127.0.0.1:8000/ad_agency/materialspl/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } this.materials = response.data return response.data } catch (e) { console.error('AN API ERROR', e) } }, async CreateMaterial () { try { const response = await this.axios .post('http://127.0.0.1:8000/ad_agency/materialspl/create/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 201) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async UpdateMaterial () { this.editedIndex = 1 try { const response = await this.axios .put('http://127.0.0.1:8000/ad_agency/materialspl/' + this.editedItem.id + '/', this.editedItem, { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 200) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, async DeleteMaterial () { this.editedIndex = 1 this.dialogDelete = true try { const response = await this.axios .delete('http://127.0.0.1:8000/ad_agency/materialspl/' + this.editedItem.id + '/', { headers: { Authorization: 'Token ' + localStorage.getItem('token') } }) if (response.status !== 204) { throw new Error(response.status) } window.location.reload() } catch (e) { console.error('AN API ERROR', e) } }, editItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialog = true }, deleteItem (item) { this.editedIndex = 1 this.editedItem = Object.assign({}, item) this.dialogDelete = true }, close () { this.dialog = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, closeDelete () { this.dialogDelete = false this.$nextTick(() => { this.editedItem = Object.assign({}, this.defaultItem) this.editedIndex = -1 }) }, save () { if (this.editedIndex > -1) { this.UpdateMaterial() } else { this.CreateMaterial() } this.close() } } } </script>","title":"MaterialsPLTableCard.vue"},{"location":"pr3/","text":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u21163.1 \u041c\u043e\u0434\u0435\u043b\u044c \u0411\u0414. class Transport_owner(models.Model): id_owner = models.IntegerField(primary_key=True) last_name = models.CharField(max_length=30, null=False) first_name = models.CharField(max_length=30, null=False) date_birthday = models.DateField() class Transport(models.Model): id_car = models.IntegerField(primary_key=True) gov_number = models.CharField(max_length=15, null=False) marka = models.CharField(max_length=20, null=False) model_car = models.CharField(max_length=20, null=False) color = models.CharField(max_length=30, null=True) class Ownership(models.Model): id_owner_car = models.IntegerField(primary_key=True) id_owner = models.ForeignKey(Transport_owner, on_delete=models.CASCADE) id_car = models.ForeignKey(Transport, on_delete=models.CASCADE) date_start = models.DateField() sate_end = models.DateField(null=True) class Driver_doc(models.Model): id_doc = models.IntegerField(primary_key=True) id_owner = models.ForeignKey(Transport_owner, on_delete=models.CASCADE) number_doc = models.CharField(max_length=10, null=False) type_doc = models.CharField(max_length=10, null=False) date_start_doc = models.DateField() =========================================================================== \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 1: \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439 \u25cf \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432. Transport_owner(1, 'Surname1', 'Name1', '1992-01-1').save() Transport_owner(2, 'Surname2', 'Name2', '1932-01-2').save() Transport_owner(3, 'Surname3', 'Name3', '1942-01-3').save() Transport_owner(4, 'Surname4', 'Name4', '1952-01-4').save() Transport_owner(5, 'Surname5', 'Name5', '1962-01-5').save() Transport_owner(6, 'Surname6', 'Name6', '1972-01-6').save() \u25cf \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430. Transport(0, 'AAA0', 'Mark0', 'Model0', 'color').save() Transport(1, 'AAA1', 'Mark1', 'Model1', 'color').save() Transport(2, 'AAA2', 'Mark2', 'Model2', 'color').save() Transport(3, 'AAA3', 'Mark3', 'Model3', 'color').save() Transport(4, 'AAA4', 'Mark4', 'Model4', 'color').save() Transport(5, 'AAA5', 'Mark5', 'Model5', 'color').save() Transport(6, 'AAA6', 'Mark6', 'Model6', 'color').save() \u25cf \u0421\u0432\u044f\u0437\u044b\u0432\u0430\u043d\u0438\u0435 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0438 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439. Ownership('1', '1', '1', '2000-01-1', '2004-01-1').save() Ownership('2', '2', '2', '2000-01-1', '2004-01-1').save() Ownership('3', '3', '3', '2000-01-1', '2004-01-1').save() Ownership('4', '4', '4', '2000-01-1', '2004-01-1').save() Ownership('5', '5', '5', '2000-01-1', '2004-01-1').save() Ownership('6', '6', '6', '2000-01-1', '2004-01-1').save() \u25cf \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u043f\u0440\u0430\u0432. Driver_doc('1', '1', 'num1', 'type1', '2000-01-1').save() Driver_doc('2', '2', 'num2', 'type2', '2000-01-1').save() Driver_doc('3', '3', 'num3', 'type3', '2000-01-1').save() Driver_doc('4', '4', 'num4', 'type4', '2000-01-1').save() Driver_doc('5', '5', 'num5', 'type5', '2000-01-1').save() Driver_doc('6', '6', 'num6', 'type6', '2000-01-1').save() Driver_doc('7', '6', 'num7', 'type7', '1996-01-1').save() =========================================================================== \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 2: \u25cf \u0412\u044b\u0432\u0435\u0434\u0435\u0442\u0435 \u0432\u0441\u0435 \u043c\u0430\u0448\u0438\u043d\u044b \u043c\u0430\u0440\u043a\u0438 \u201cToyota\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u043c\u0430\u0440\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c): >>> Transport.objects.filter(marka=\"Mark5\") <QuerySet [<Transport: Transport object (5)>]> \u25cf \u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u201c\u041e\u043b\u0435\u0433\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u044b\u043c \u0434\u0440\u0443\u0433\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u043d\u0430 \u0432\u0430\u0448\u0435 \u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0435): >>> Transport_owner.objects.filter(first_name=\"Name2\") <QuerySet [<Transport_owner: Transport_owner object (2)>]> \u25cf \u0412\u0437\u044f\u0432 \u043b\u044e\u0431\u043e\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0435\u0433\u043e id, \u0438 \u043f\u043e \u044d\u0442\u043e\u043c\u0443 id \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f \u0432 \u0432\u0438\u0434\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u043c\u043e\u0434\u0435\u043b\u0438 (\u043c\u043e\u0436\u043d\u043e \u0432 2 \u0437\u0430\u043f\u0440\u043e\u0441\u0430): >>> get_id = Transport_owner.objects.all()[3].id_owner >>> Driver_doc.objects.get(id_owner=get_id) <Driver_doc: Driver_doc object (4)> \u25cf \u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043a\u0440\u0430\u0441\u043d\u044b\u0445 \u043c\u0430\u0448\u0438\u043d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0446\u0432\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443 \u0432\u0430\u0441 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442): >>> Transport_owner.objects.filter(ownership__id_car__color='color') <QuerySet [<Transport_owner: Transport_owner object (1)>, <Transport_owner: Transport_owner object (2)>, <Transport_owner: Transport_owner object (3)>, <Transport_owner: Transpo rt_owner object (4)>, <Transport_owner: Transport_owner object (5)>, <Transport_owner: Transport_owner object (6)>]> \u25cf \u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432, \u0447\u0435\u0439 \u0433\u043e\u0434 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 2010 (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u0433\u043e\u0434, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0443 \u0432\u0430\u0441 \u0432 \u0431\u0430\u0437\u0435): >>> Transport_owner.objects.filter(ownership__date_start='2000-01-01') <QuerySet [<Transport_owner: Transport_owner object (1)>, <Transport_owner: Transport_owner object (2)>, <Transport_owner: Transport_owner object (3)>, <Transport_owner: Transpo rt_owner object (4)>, <Transport_owner: Transport_owner object (5)>, <Transport_owner: Transport_owner object (6)>]> =========================================================================== \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 3: \u25cf \u0412\u044b\u0432\u043e\u0434 \u0434\u0430\u0442\u044b \u0432\u044b\u0434\u0430\u0447\u0438 \u0441\u0430\u043c\u043e\u0433\u043e \u0441\u0442\u0430\u0440\u0448\u0435\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f: >>> Driver_doc.objects.aggregate(date_start_doc=Min(\"date_start_doc\")) {'date_start_doc': datetime.date(1996, 1, 1)} \u25cf \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0430\u043c\u0443\u044e \u043f\u043e\u0437\u0434\u043d\u044e\u044e \u0434\u0430\u0442\u0443 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439, \u0438\u043c\u0435\u044e\u0449\u0443\u044e \u043a\u0430\u043a\u0443\u044e-\u0442\u043e \u0438\u0437 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u0432 \u0432\u0430\u0448\u0435\u0439 \u0431\u0430\u0437\u0435: >>> Ownership.objects.aggregate(date_start=Max(\"date_start\")) {'date_start': datetime.date(2000, 1, 1)} \u25cf \u0412\u044b\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f: >>> Ownership.objects.values(\"id_owner\").annotate(Count(\"id_car\")) <QuerySet [{'id_owner': 1, 'id_car__count': 1}, {'id_owner': 2, 'id_car__count': 1}, {'id_owner': 3, 'id_car__count': 1}, {'id_owner': 4, 'id_car__count': 1}, {'id_owner': 5, 'i d_car__count': 1}, {'id_owner': 6, 'id_car__count': 1}]> \u25cf \u041f\u043e\u0434\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0430\u0440\u043a\u0438: >>> Transport.objects.values(\"marka\").annotate(Count(\"id_car\")) <QuerySet [{'marka': 'Mark0', 'id_car__count': 1}, {'marka': 'Mark1', 'id_car__count': 1}, {'marka': 'Mark2', 'id_car__count': 1}, {'marka': 'Mark3', 'id_car__count': 1}, {'mark a': 'Mark4', 'id_car__count': 1}, {'marka': 'Mark5', 'id_car__count': 1}, {'marka': 'Mark6', 'id_car__count': 1}]> \u25cf \u041e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0432\u0441\u0435\u0445 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043f\u043e \u0434\u0430\u0442\u0435 \u0432\u044b\u0434\u0430\u0447\u0438 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f: >>> Driver_doc.objects.all().order_by(\"date_start_doc\") <QuerySet [<Driver_doc: Driver_doc object (7)>, <Driver_doc: Driver_doc object (1)>, <Driver_doc: Driver_doc object (2)>, <Driver_doc: Driver_doc object (3)>, <Driver_doc: Drive r_doc object (4)>, <Driver_doc: Driver_doc object (5)>, <Driver_doc: Driver_doc object (6)>]>","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0430 3.1"},{"location":"pr3/#no31","text":"\u041c\u043e\u0434\u0435\u043b\u044c \u0411\u0414. class Transport_owner(models.Model): id_owner = models.IntegerField(primary_key=True) last_name = models.CharField(max_length=30, null=False) first_name = models.CharField(max_length=30, null=False) date_birthday = models.DateField() class Transport(models.Model): id_car = models.IntegerField(primary_key=True) gov_number = models.CharField(max_length=15, null=False) marka = models.CharField(max_length=20, null=False) model_car = models.CharField(max_length=20, null=False) color = models.CharField(max_length=30, null=True) class Ownership(models.Model): id_owner_car = models.IntegerField(primary_key=True) id_owner = models.ForeignKey(Transport_owner, on_delete=models.CASCADE) id_car = models.ForeignKey(Transport, on_delete=models.CASCADE) date_start = models.DateField() sate_end = models.DateField(null=True) class Driver_doc(models.Model): id_doc = models.IntegerField(primary_key=True) id_owner = models.ForeignKey(Transport_owner, on_delete=models.CASCADE) number_doc = models.CharField(max_length=10, null=False) type_doc = models.CharField(max_length=10, null=False) date_start_doc = models.DateField() ===========================================================================","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u21163.1"},{"location":"pr3/#1","text":"","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 1:"},{"location":"pr3/#_1","text":"\u25cf \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432. Transport_owner(1, 'Surname1', 'Name1', '1992-01-1').save() Transport_owner(2, 'Surname2', 'Name2', '1932-01-2').save() Transport_owner(3, 'Surname3', 'Name3', '1942-01-3').save() Transport_owner(4, 'Surname4', 'Name4', '1952-01-4').save() Transport_owner(5, 'Surname5', 'Name5', '1962-01-5').save() Transport_owner(6, 'Surname6', 'Name6', '1972-01-6').save() \u25cf \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430. Transport(0, 'AAA0', 'Mark0', 'Model0', 'color').save() Transport(1, 'AAA1', 'Mark1', 'Model1', 'color').save() Transport(2, 'AAA2', 'Mark2', 'Model2', 'color').save() Transport(3, 'AAA3', 'Mark3', 'Model3', 'color').save() Transport(4, 'AAA4', 'Mark4', 'Model4', 'color').save() Transport(5, 'AAA5', 'Mark5', 'Model5', 'color').save() Transport(6, 'AAA6', 'Mark6', 'Model6', 'color').save() \u25cf \u0421\u0432\u044f\u0437\u044b\u0432\u0430\u043d\u0438\u0435 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0438 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439. Ownership('1', '1', '1', '2000-01-1', '2004-01-1').save() Ownership('2', '2', '2', '2000-01-1', '2004-01-1').save() Ownership('3', '3', '3', '2000-01-1', '2004-01-1').save() Ownership('4', '4', '4', '2000-01-1', '2004-01-1').save() Ownership('5', '5', '5', '2000-01-1', '2004-01-1').save() Ownership('6', '6', '6', '2000-01-1', '2004-01-1').save() \u25cf \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u043f\u0440\u0430\u0432. Driver_doc('1', '1', 'num1', 'type1', '2000-01-1').save() Driver_doc('2', '2', 'num2', 'type2', '2000-01-1').save() Driver_doc('3', '3', 'num3', 'type3', '2000-01-1').save() Driver_doc('4', '4', 'num4', 'type4', '2000-01-1').save() Driver_doc('5', '5', 'num5', 'type5', '2000-01-1').save() Driver_doc('6', '6', 'num6', 'type6', '2000-01-1').save() Driver_doc('7', '6', 'num7', 'type7', '1996-01-1').save() ===========================================================================","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439"},{"location":"pr3/#2","text":"\u25cf \u0412\u044b\u0432\u0435\u0434\u0435\u0442\u0435 \u0432\u0441\u0435 \u043c\u0430\u0448\u0438\u043d\u044b \u043c\u0430\u0440\u043a\u0438 \u201cToyota\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u043c\u0430\u0440\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c): >>> Transport.objects.filter(marka=\"Mark5\") <QuerySet [<Transport: Transport object (5)>]> \u25cf \u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u201c\u041e\u043b\u0435\u0433\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u044b\u043c \u0434\u0440\u0443\u0433\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u043d\u0430 \u0432\u0430\u0448\u0435 \u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0435): >>> Transport_owner.objects.filter(first_name=\"Name2\") <QuerySet [<Transport_owner: Transport_owner object (2)>]> \u25cf \u0412\u0437\u044f\u0432 \u043b\u044e\u0431\u043e\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0435\u0433\u043e id, \u0438 \u043f\u043e \u044d\u0442\u043e\u043c\u0443 id \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f \u0432 \u0432\u0438\u0434\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u043c\u043e\u0434\u0435\u043b\u0438 (\u043c\u043e\u0436\u043d\u043e \u0432 2 \u0437\u0430\u043f\u0440\u043e\u0441\u0430): >>> get_id = Transport_owner.objects.all()[3].id_owner >>> Driver_doc.objects.get(id_owner=get_id) <Driver_doc: Driver_doc object (4)> \u25cf \u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043a\u0440\u0430\u0441\u043d\u044b\u0445 \u043c\u0430\u0448\u0438\u043d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0446\u0432\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443 \u0432\u0430\u0441 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442): >>> Transport_owner.objects.filter(ownership__id_car__color='color') <QuerySet [<Transport_owner: Transport_owner object (1)>, <Transport_owner: Transport_owner object (2)>, <Transport_owner: Transport_owner object (3)>, <Transport_owner: Transpo rt_owner object (4)>, <Transport_owner: Transport_owner object (5)>, <Transport_owner: Transport_owner object (6)>]> \u25cf \u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432, \u0447\u0435\u0439 \u0433\u043e\u0434 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 2010 (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u0433\u043e\u0434, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0443 \u0432\u0430\u0441 \u0432 \u0431\u0430\u0437\u0435): >>> Transport_owner.objects.filter(ownership__date_start='2000-01-01') <QuerySet [<Transport_owner: Transport_owner object (1)>, <Transport_owner: Transport_owner object (2)>, <Transport_owner: Transport_owner object (3)>, <Transport_owner: Transpo rt_owner object (4)>, <Transport_owner: Transport_owner object (5)>, <Transport_owner: Transport_owner object (6)>]> ===========================================================================","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 2:"},{"location":"pr3/#3","text":"\u25cf \u0412\u044b\u0432\u043e\u0434 \u0434\u0430\u0442\u044b \u0432\u044b\u0434\u0430\u0447\u0438 \u0441\u0430\u043c\u043e\u0433\u043e \u0441\u0442\u0430\u0440\u0448\u0435\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f: >>> Driver_doc.objects.aggregate(date_start_doc=Min(\"date_start_doc\")) {'date_start_doc': datetime.date(1996, 1, 1)} \u25cf \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0430\u043c\u0443\u044e \u043f\u043e\u0437\u0434\u043d\u044e\u044e \u0434\u0430\u0442\u0443 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439, \u0438\u043c\u0435\u044e\u0449\u0443\u044e \u043a\u0430\u043a\u0443\u044e-\u0442\u043e \u0438\u0437 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u0432 \u0432\u0430\u0448\u0435\u0439 \u0431\u0430\u0437\u0435: >>> Ownership.objects.aggregate(date_start=Max(\"date_start\")) {'date_start': datetime.date(2000, 1, 1)} \u25cf \u0412\u044b\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f: >>> Ownership.objects.values(\"id_owner\").annotate(Count(\"id_car\")) <QuerySet [{'id_owner': 1, 'id_car__count': 1}, {'id_owner': 2, 'id_car__count': 1}, {'id_owner': 3, 'id_car__count': 1}, {'id_owner': 4, 'id_car__count': 1}, {'id_owner': 5, 'i d_car__count': 1}, {'id_owner': 6, 'id_car__count': 1}]> \u25cf \u041f\u043e\u0434\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0430\u0440\u043a\u0438: >>> Transport.objects.values(\"marka\").annotate(Count(\"id_car\")) <QuerySet [{'marka': 'Mark0', 'id_car__count': 1}, {'marka': 'Mark1', 'id_car__count': 1}, {'marka': 'Mark2', 'id_car__count': 1}, {'marka': 'Mark3', 'id_car__count': 1}, {'mark a': 'Mark4', 'id_car__count': 1}, {'marka': 'Mark5', 'id_car__count': 1}, {'marka': 'Mark6', 'id_car__count': 1}]> \u25cf \u041e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0432\u0441\u0435\u0445 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043f\u043e \u0434\u0430\u0442\u0435 \u0432\u044b\u0434\u0430\u0447\u0438 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f: >>> Driver_doc.objects.all().order_by(\"date_start_doc\") <QuerySet [<Driver_doc: Driver_doc object (7)>, <Driver_doc: Driver_doc object (1)>, <Driver_doc: Driver_doc object (2)>, <Driver_doc: Driver_doc object (3)>, <Driver_doc: Drive r_doc object (4)>, <Driver_doc: Driver_doc object (5)>, <Driver_doc: Driver_doc object (6)>]>","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 3:"}]}